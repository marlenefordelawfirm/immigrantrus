import{bp as k,bo as $,br as z,eE as B,bO as R,eF as F,n as d,p as P,ao as G,a as u,j as a,o as M,eG as H,co as Q,B as h,L as J,eH as U,dA as Z,eI as q,eJ as j,bx as V,dB as W,d9 as Y,eK as K,dz as X,r as b,a7 as ee,z as O,l as te,H as ae,bf as ne,d as T,ad as oe,Z as w,E as le,ae as ie,bn as se,_ as re,J as ce}from"./index.Dg3lKJeg.js";import{D as de}from"./mutations.DtsxS3kK.js";import{u as me,a as v,S as ue,T as L}from"./useSortedArray.BvQl5tsh.js";import{S as be}from"./SettingsPageContainer.CJeLyK8s.js";import{g as I,S as pe}from"./getObjectTypeLabel.CC2ZWRUI.js";import{T as ge,S as g}from"./TableRow.BM7bNp8J.js";import{I as fe}from"./IconArchiveOff.CYcNKIbh.js";import{S as he}from"./SubMenuTopBarContainer.BNGFwgBo.js";import{S as ye}from"./Table.6yesK_WS.js";import{S as Ce}from"./TableHeader.D43eMMOy.js";import"./TableBody.DCdzfPFn.js";import"./Breadcrumb.CQyf5Hn6.js";const Oe=()=>{const[e]=k(de),{refreshObjectMetadataItems:o}=$("network-only");return{deleteOneObjectMetadataItem:async n=>{const l=await e({variables:{idToDelete:n}});return await o(),l}}},Ie=({objectMetadataItems:e,skip:o=!1})=>{const s=e.map(i=>({objectNameSingular:i.nameSingular,variables:{},fields:{id:!0}})),n=z(),l=B({operationSignatures:s}),{data:r}=R(l??F,{skip:o,client:n});return{totalCountByObjectMetadataItemNamePlural:Object.fromEntries(Object.entries(r??{}).map(([i,c])=>[i,c.totalCount]))}},_=d(ge)`
  grid-template-columns: 180px 98.7px 98.7px 98.7px 36px;
`,Se=d(g)`
  color: ${({theme:e})=>e.font.color.primary};
  gap: ${({theme:e})=>e.spacing(2)};
`,je=d.div`
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
`,Te=d(g)`
  justify-content: center;
  padding-right: ${({theme:e})=>e.spacing(1)};
`,N=({action:e,objectMetadataItem:o,link:s,totalObjectCount:n})=>{const l=P(),{getIcon:r}=G(),m=r(o.icon),i=I(o);return u(_,{to:s,children:[u(Se,{children:[!!m&&a(m,{style:{minWidth:l.icon.size.md},size:l.icon.size.md,stroke:l.icon.stroke.sm}),a(je,{title:o.labelPlural,children:o.labelPlural})]}),a(g,{children:a(pe,{objectTypeLabel:i})}),a(g,{align:"right",children:o.fields.filter(c=>!c.isSystem).length}),a(g,{align:"right",children:n}),a(Te,{children:e})]},o.namePlural)},we="/assets/cover-dark.C8JQZqzH.png",ve="/assets/cover-light.DdApNeZg.png",Le=d(J)`
  align-items: center;
  background-image: ${({theme:e})=>e.name==="light"?`url('${ve.toString()}')`:`url('${we.toString()}')`};
  background-size: cover;
  border-radius: ${({theme:e})=>e.border.radius.md};
  box-sizing: border-box;
  display: flex;
  min-height: 153px;
  justify-content: center;
  position: relative;
  margin-bottom: ${({theme:e})=>e.spacing(8)};
`,Ne=d.div`
  padding-top: ${({theme:e})=>e.spacing(5)};
`,Pe=()=>{const{i18n:e,_:o}=M();return a(Le,{children:a(Ne,{children:a(H,{Icon:Q,title:e._({id:"6n7jtr"}),size:"small",to:"/settings/"+h.ObjectOverview})})})},Me=({onActivate:e,objectMetadataItemNamePlural:o,onDelete:s,isCustomObject:n})=>{const l=`${o}-settings-object-inactive-menu-dropdown`,{closeDropdown:r}=U(),m=()=>{e(),r(l)},i=()=>{s(),r(l)};return a(X,{dropdownId:l,clickableComponent:a(Y,{"aria-label":"Inactive Object Options",Icon:K,accent:"tertiary"}),dropdownComponents:a(Z,{widthInPixels:q.Narrow,children:u(W,{children:[a(j,{text:"Activate",LeftIcon:fe,onClick:m}),n&&a(j,{text:"Delete",LeftIcon:V,accent:"danger",onClick:i})]})})})},p={tableId:"settingsObject",fields:[{fieldLabel:{id:"6YtxFj"},fieldName:"labelPlural",fieldType:"string",align:"left"},{fieldLabel:{id:"+zy2Nq"},fieldName:"objectTypeLabel",fieldType:"string",align:"left"},{fieldLabel:{id:"vF68cg"},fieldName:"fieldsCount",fieldType:"number",align:"right"},{fieldLabel:{id:"AwUsnG"},fieldName:"totalObjectCount",fieldType:"number",align:"right"}],initialSort:{fieldName:"labelPlural",orderBy:"AscNullsLast"}},_e=d(ce)`
  color: ${({theme:e})=>e.font.color.tertiary};
`,Ae=d(re)`
  padding-bottom: ${({theme:e})=>e.spacing(2)};
  width: 100%;
`,Je=()=>{const{i18n:e,_:o}=M(),s=P(),[n,l]=b.useState(""),{deleteOneObjectMetadataItem:r}=Oe(),{updateOneObjectMetadataItem:m}=me(),{activeNonSystemObjectMetadataItems:i,inactiveNonSystemObjectMetadataItems:c}=ee(),{totalCountByObjectMetadataItemNamePlural:f}=Ie({objectMetadataItems:[...i,...c]}),A=b.useMemo(()=>i.map(t=>({objectMetadataItem:t,labelPlural:t.labelPlural,objectTypeLabel:I(t).labelText,fieldsCount:t.fields.filter(C=>!C.isSystem).length,totalObjectCount:f[t.namePlural]??0})),[i,f]),x=b.useMemo(()=>c.map(t=>({objectMetadataItem:t,labelPlural:t.labelPlural,objectTypeLabel:I(t).labelText,fieldsCount:t.fields.filter(C=>!C.isSystem).length,totalObjectCount:f[t.namePlural]??0})),[c,f]),y=v(A,p),S=v(x,p),E=b.useMemo(()=>y.filter(t=>t.labelPlural.toLowerCase().includes(n.toLowerCase())||t.objectTypeLabel.toLowerCase().includes(n.toLowerCase())),[y,n]),D=b.useMemo(()=>S.filter(t=>t.labelPlural.toLowerCase().includes(n.toLowerCase())||t.objectTypeLabel.toLowerCase().includes(n.toLowerCase())),[S,n]);return a(he,{title:e._({id:"5cNMFz"}),actionButton:a(le,{to:O(h.NewObject),children:a(ie,{Icon:se,title:e._({id:"dEO3Zx"}),accent:"blue",size:"small"})}),links:[{children:a(w,{id:"pmUArF"}),href:O(h.Workspace)},{children:a(w,{id:"B3toQF"})}],children:a(be,{children:u(oe,{children:[a(Pe,{}),u(te,{children:[a(ae,{title:e._({id:"fV7V51"})}),a(Ae,{instanceId:"settings-objects-search",LeftIcon:ne,placeholder:e._({id:"ofuw3g"}),value:n,onChange:l}),u(ye,{children:[u(_,{children:[p.fields.map(t=>a(ue,{fieldName:t.fieldName,label:e._(t.fieldLabel),tableId:p.tableId,align:t.align,initialSort:p.initialSort},t.fieldName)),a(Ce,{})]}),T.isNonEmptyArray(y)&&a(L,{title:e._({id:"F6pfE9"}),children:E.map(t=>a(N,{objectMetadataItem:t.objectMetadataItem,totalObjectCount:t.totalObjectCount,action:a(_e,{size:s.icon.size.md,stroke:s.icon.stroke.sm}),link:O(h.ObjectDetail,{objectNamePlural:t.objectMetadataItem.namePlural})},t.objectMetadataItem.namePlural))}),T.isNonEmptyArray(c)&&a(L,{title:e._({id:"NoNwIX"}),children:D.map(t=>a(N,{objectMetadataItem:t.objectMetadataItem,totalObjectCount:t.totalObjectCount,action:a(Me,{isCustomObject:t.objectMetadataItem.isCustom,objectMetadataItemNamePlural:t.objectMetadataItem.namePlural,onActivate:()=>m({idToUpdate:t.objectMetadataItem.id,updatePayload:{isActive:!0}}),onDelete:()=>r(t.objectMetadataItem.id)})},t.objectMetadataItem.namePlural))})]})]})]})})})};export{Je as SettingsObjects};
