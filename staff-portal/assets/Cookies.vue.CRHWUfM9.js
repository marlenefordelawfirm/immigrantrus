import{d as g,F as B,J as U,c as V,aA as A,e as h,o as p,M as S,K as F,w as m,f as r,q as x,E as b,u as f,T as O,aG as q,s as z,ax as L,aH as R,L as T,a2 as Z,aI as G,b as M,x as H,z as J,Z as P,ay as N}from"./index._i9Oi-Kg.js";import{r as W}from"./EmptyState.vue.BQEWNEB1.js";import{m as Q,g as X}from"./SidebarButton.vue.BbODg-x8.js";import{h as Y,b as y,_ as ee,a as ae}from"./CommandActionInput.vue.CEidsNSa.js";import{u as oe}from"./ViewLayout.vue.CgI9G9hD.js";import{x as te}from"./ViewLayoutContent.vue.CTRkk1i7.js";import{_ as le}from"./ViewLayoutSection.vue.DQEriikE.js";import{q as ie}from"./Form.vue.Cyv_cjzL.js";import"./index.Dg3lKJeg.js";import"./clsx.B-dksMZM.js";import"./index.Wb4bzIyB.js";import"./index.BVeNH5zi.js";import"./index.BUCFnM-n.js";import"./index.DEehm0bc.js";import"./index.D4Wp6AEg.js";import"./index.CjrT3HcA.js";import"./index.CWtGfzcb.js";import"./index.D55_0Pbk.js";import"./index.dom.C3-224fz.js";import"./index.DdCAsX36.js";import"./index.ByI_odx6.js";import"./syntax.Dh_7PnPp.js";import"./index.c2V3InAJ.js";import"./default.Cl3hj7Sz.js";import"./index.DOWyBKr8.js";import"./index.COYepv-L.js";import"./index.Dq2i-IQA.js";import"./index.BY3x9OSE.js";import"./index.D13MPiJ5.js";import"./index.C2o2j-tx.js";import"./index.D22iV9cu.js";import"./index.C06_t6vS.js";import"./decode.BDRbQOCM.js";import"./index.bsVAaBS1.js";import"./index.E0wwlW8h.js";import"./index.DWHkiPoB.js";import"./fuse.Ch1WBRTM.js";import"./ScalarAsciiArt.vue.BKTIY37v.js";import"./ScalarHotkey.vue.O6yg1oQq.js";import"./DeleteSidebarListElement.vue.BYxIfb0-.js";const se=g({__name:"CookieForm",setup(C){const{activeCookieId:n}=B(),{cookies:v,cookieMutators:k}=U(),a=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],d=V(()=>v[n.value]||A.parse({name:"",value:"",domain:"",path:""})),_=(s,e)=>{k.edit(n.value,s,e)};return(s,e)=>(p(),h(ie,{data:d.value,onUpdate:_,options:a},null,8,["data"]))}}),me={class:"flex h-8 items-start gap-2 text-sm"},ue={class:"flex h-8 items-start gap-2 text-sm"},re={class:"flex h-8 items-start gap-2 text-sm"},ne=g({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(C,{emit:n}){const v=C,k=n,a=S({name:"",value:"",domain:""}),{toast:d}=q(),_=()=>{if(!a.value.name||!a.value.value){d("Please fill in all fields before adding a cookie.","error");return}k("submit",a.value),v.state.hide()};return F(()=>v.state.open,s=>{s&&(a.value={name:"",value:"",domain:""})}),(s,e)=>(p(),h(f(O),{size:"xs",state:s.state,title:"Add Cookie"},{default:m(()=>[r(Y,{disabled:!a.value.name||!a.value.value,onCancel:e[3]||(e[3]=u=>k("cancel")),onSubmit:_},{submit:m(()=>e[7]||(e[7]=[b("Add Cookie")])),default:m(()=>[x("div",me,[e[4]||(e[4]=b(" Name: ")),r(y,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name=u),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),x("div",ue,[e[5]||(e[5]=b(" Value: ")),r(y,{modelValue:a.value.value,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.value=u),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),x("div",re,[e[6]||(e[6]=b(" Domain: ")),r(y,{modelValue:a.value.domain,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.domain=u),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),de=z(ne,[["__scopeId","data-v-694018d6"]]),ce={class:"flex-1"},pe={class:"relative mb-[.5px] last:mb-0"},ea=g({__name:"Cookies",setup(C){const{cookies:n,cookieMutators:v,events:k,workspaceMutators:a}=U(),{activeWorkspace:d,activeCookieId:_}=B(),s=L(),e=R(),u=T(),D=l=>{var t,o;const i=A.parse({name:l.name,value:l.value,domain:l.domain,path:"/"});v.add(i),a.edit((t=d.value)==null?void 0:t.uid,"cookies",[...((o=d.value)==null?void 0:o.cookies)??[],i.uid]),s.push({name:"cookies",params:{cookies:i.uid}})},E=l=>{var t,o;v.delete(l),a.edit((t=d.value)==null?void 0:t.uid,"cookies",[...(((o=d.value)==null?void 0:o.cookies)??[]).filter(c=>c!==l)]);const i=Object.values(n).filter(c=>c.uid!==l);if(i.length>0){const c=i[i.length-1];c&&s.push(c.uid)}else s.push({name:"cookies",params:{[N.Cookies]:"default"}})},w=()=>{u.show()},$=l=>{l!=null&&l.createNew&&e.name==="cookies"&&w()},j=(l,t)=>{var o;const i={name:"cookies",params:{workspace:((o=d.value)==null?void 0:o.uid)??"default",cookies:t}};if(l.metaKey){const c=s.resolve(i).href;window.open(c,"_blank");return}s.push(i)};Z(()=>k.hotKeys.on($)),G(()=>k.hotKeys.off($));const I=V(()=>n[_.value]),K=V(()=>Object.keys(n).length>0&&I.value);return(l,t)=>(p(),h(oe,null,{default:m(()=>[r(f(Q),{title:"Cookies"},{content:m(()=>[x("div",ce,[r(ee,null,{default:m(()=>[(p(!0),M(H,null,J(Object.values(f(n)),o=>(p(),M("li",{key:o.uid,class:"gap-1/2 flex flex-col"},[x("div",pe,[(p(),h(ae,{key:o.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[f(N).Cookies]:o.uid}},type:"cookies",variable:{name:o.name,uid:o.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:P(i=>j(i,o.uid),["prevent"]),onDelete:i=>E(o.uid)},null,8,["to","variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:m(()=>[r(X,{click:w,hotkey:"N"},{title:m(()=>t[1]||(t[1]=[b(" Add Cookie ")])),_:1})]),_:1}),r(te,{class:"flex-1"},{default:m(()=>[K.value?(p(),h(le,{key:0,class:"*:border-b-0"},{title:m(()=>t[2]||(t[2]=[b("Edit Cookie")])),default:m(()=>[r(se)]),_:1})):(p(),h(W,{key:1}))]),_:1}),r(de,{state:f(u),onCancel:t[0]||(t[0]=o=>f(u).hide()),onSubmit:D},null,8,["state"])]),_:1}))}});export{ea as default};
