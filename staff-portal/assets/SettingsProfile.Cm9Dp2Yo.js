import{o as h,cJ as Z,a,j as e,H as _,ae as v,ad as C,bv as B,cK as j,R as w,bu as I,bw as M,by as z,_ as S,be as L,cw as V,r as T,cL as G,aJ as H,bB as Y,bE as J,n as k,cM as K,w as U,F as X,z as A,l as u,cN as q,E as Q,a0 as x,B as y,Z as P}from"./index.Dg3lKJeg.js";import{S as W}from"./SettingsCard.EuecTdsf.js";import{S as tt}from"./SettingsPageContainer.CJeLyK8s.js";import{S as et}from"./SubMenuTopBarContainer.BNGFwgBo.js";import{I as it}from"./IconShield.CVNlWn5t.js";import"./Breadcrumb.CQyf5Hn6.js";const nt=()=>{const{i18n:t,_:c}=h(),{handleResetPassword:n}=Z();return a(C,{children:[e(_,{title:t._({id:"VhMDMg"}),description:t._({id:"v3xM25"})}),e(v,{onClick:n(),variant:"secondary",title:t._({id:"VhMDMg"})})]})},b="delete-account-modal",at=()=>{const{i18n:t,_:c}=h(),{openModal:n}=B(),[d]=j(),r=w(I),o=r==null?void 0:r.email,{signOut:i}=M(),m=async()=>{await d(),await i()};return a(C,{children:[e(_,{title:t._({id:"Zz6Cxn"}),description:t._({id:"gAz0S5"})}),e(v,{accent:"danger",onClick:()=>n(b),variant:"secondary",title:t._({id:"ZDGm40"})}),e(z,{confirmationValue:o,confirmationPlaceholder:o??"",modalId:b,title:t._({id:"nD0Y+a"}),subtitle:a(C,{children:["This action cannot be undone. This will permanently delete your entire account. ",e("br",{})," Please type in your email to confirm."]}),onConfirmClick:m,confirmButtonText:t._({id:"ZDGm40"})})]})},ot=()=>{const t=w(I);return e(S,{instanceId:`user-email-${t==null?void 0:t.id}`,value:t==null?void 0:t.email,disabled:!0,fullWidth:!0},"email-"+(t==null?void 0:t.id))},st=k.div`
  display: flex;
  flex-direction: row;
  > * + * {
    margin-left: ${({theme:t})=>t.spacing(4)};
  }
`,lt=({autoSave:t=!0,onFirstNameUpdate:c,onLastNameUpdate:n})=>{var p,E;const{i18n:d,_:r}=h(),o=w(I),[i,m]=L(V),[s,F]=T.useState(((p=i==null?void 0:i.name)==null?void 0:p.firstName)??""),[l,N]=T.useState(((E=i==null?void 0:i.name)==null?void 0:E.lastName)??""),{updateOneRecord:O}=G({objectNameSingular:H.WorkspaceMember}),f=Y(async()=>{c==null||c(s),n==null||n(l);try{if(!(i!=null&&i.id))throw new Error("User is not logged in");t&&(await O({idToUpdate:i==null?void 0:i.id,updateOneRecordInput:{name:{firstName:s,lastName:l}}}),m({...i,name:{firstName:s,lastName:l}}))}catch(g){J(g)}},500);T.useEffect(()=>{if(!i)return;const{firstName:g,lastName:$}=i.name;return(g!==s||$!==l)&&s!==""&&l!==""&&f(),()=>{f.cancel()}},[s,l,o,f,t,i]);const D=`${i==null?void 0:i.id}-first-name`,R=`${i==null?void 0:i.id}-last-name`;return a(st,{children:[e(S,{instanceId:D,label:d._({id:"kODvZJ"}),value:s,onChange:F,placeholder:"Tim",fullWidth:!0}),e(S,{instanceId:R,label:d._({id:"UXBCwc"}),value:l,onChange:N,placeholder:"Cook",fullWidth:!0})]})},mt=()=>{var o;const{i18n:t,_:c}=h(),{currentUserWorkspaceTwoFactorAuthenticationMethods:n}=K(),d=U(X.IS_TWO_FACTOR_AUTHENTICATION_ENABLED),r=((o=n.TOTP)==null?void 0:o.status)==="VERIFIED";return e(et,{title:t._({id:"vERlcd"}),links:[{children:e(P,{id:"7PzzBU"}),href:A(y.ProfilePage)},{children:e(P,{id:"vERlcd"})}],children:a(tt,{children:[a(u,{children:[e(_,{title:t._({id:"N0+GsR"})}),e(q,{})]}),a(u,{children:[e(_,{title:t._({id:"6YtxFj"}),description:t._({id:"9ivpwk"})}),e(lt,{})]}),a(u,{children:[e(_,{title:t._({id:"O3oNi5"}),description:t._({id:"VGZYbZ"})}),e(ot,{})]}),d&&a(u,{children:[e(_,{title:t._({id:"tuvLv1"}),description:t._({id:"UXZry7"})}),e(Q,{to:A(y.TwoFactorAuthenticationStrategyConfig,{twoFactorAuthenticationStrategy:"TOTP"}),children:e(W,{title:t._({id:"YZWcQL"}),Icon:e(it,{}),Status:r?e(x,{text:"Active",color:"turquoise"}):e(x,{text:"Setup",color:"blue"})})})]}),e(u,{children:e(nt,{})}),e(u,{children:e(at,{})})]})})};export{mt as SettingsProfile};
