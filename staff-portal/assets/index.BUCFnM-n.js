import{c as a,i as m,e as I}from"./index.DEehm0bc.js";import{w as W}from"./index.D4Wp6AEg.js";const E=function(e){if(e==null)return L;if(typeof e=="function")return p(e);if(typeof e=="object")return Array.isArray(e)?O(e):R(e);if(typeof e=="string")return _(e);throw new Error("Expected function, string, or object as test")};function O(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=E(e[r]);return p(n);function n(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function R(e){const t=e;return p(r);function r(n){const i=n;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function _(e){return p(t);function t(r){return r&&r.type===e}}function p(e){return t;function t(r,n,i){return!!(q(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function L(){return!0}function q(e){return e!==null&&typeof e=="object"&&"type"in e}const y=function(e,t,r){const n=E(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]},b=/\n/g,w=/[\t ]+/g,d=a("br"),x=a(G),P=a("p"),k=a("tr"),D=a(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",z,H]),v=a(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function he(e,t){const r={},n="children"in e?e.children:[],i=v(e),o=S(e,{whitespace:r.whitespace||"normal"}),c=[];(e.type==="text"||e.type==="comment")&&c.push(...F(e,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<n.length;)c.push(...N(n[l],e,{whitespace:o,breakBefore:l?void 0:i,breakAfter:l<n.length-1?d(n[l+1]):i}));const s=[];let u;for(l=-1;++l<c.length;){const f=c[l];typeof f=="number"?u!==void 0&&f>u&&(u=f):f&&(u!==void 0&&u>-1&&s.push(`
`.repeat(u)||" "),u=-1,s.push(f))}return s.join("")}function N(e,t,r){return e.type==="element"?M(e,t,r):e.type==="text"?r.whitespace==="normal"?F(e,r):V(e):[]}function M(e,t,r){const n=S(e,r),i=e.children||[];let o=-1,c=[];if(D(e))return c;let l,s;for(d(e)||k(e)&&y(t,e,k)?s=`
`:P(e)?(l=2,s=2):v(e)&&(l=1,s=1);++o<i.length;)c=c.concat(N(i[o],e,{whitespace:n,breakBefore:o?void 0:l,breakAfter:o<i.length-1?d(i[o+1]):s}));return x(e)&&y(t,e,x)&&c.push("	"),l&&c.unshift(l),s&&c.push(s),c}function F(e,t){const r=String(e.value),n=[],i=[];let o=0;for(;o<=r.length;){b.lastIndex=o;const s=b.exec(r),u=s&&"index"in s?s.index:r.length;n.push(Y(r.slice(o,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),o===0?t.breakBefore:!0,u===r.length?t.breakAfter:!0)),o=u+1}let c=-1,l;for(;++c<n.length;)n[c].charCodeAt(n[c].length-1)===8203||c<n.length-1&&n[c+1].charCodeAt(0)===8203?(i.push(n[c]),l=void 0):n[c]?(typeof l=="number"&&i.push(l),i.push(n[c]),l=0):(c===0||c===n.length-1)&&i.push(0);return i}function V(e){return[String(e.value)]}function Y(e,t,r){const n=[];let i=0,o;for(;i<e.length;){w.lastIndex=i;const c=w.exec(e);o=c?c.index:e.length,!i&&!o&&c&&!t&&n.push(""),i!==o&&n.push(e.slice(i,o)),i=c?o+c[0].length:o}return i!==o&&!r&&n.push(""),n.join(" ")}function S(e,t){if(e.type==="element"){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function z(e){return!!(e.properties||{}).hidden}function G(e){return e.tagName==="td"||e.tagName==="th"}function H(e){return e.tagName==="dialog"&&!(e.properties||{}).open}const B=function(e){if(e==null)return U;if(typeof e=="function")return h(e);if(typeof e=="object")return Array.isArray(e)?J(e):K(e);if(typeof e=="string")return Q(e);throw new Error("Expected function, string, or object as test")};function J(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=B(e[r]);return h(n);function n(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function K(e){const t=e;return h(r);function r(n){const i=n;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function Q(e){return h(t);function t(r){return r&&r.type===e}}function h(e){return t;function t(r,n,i){return!!(X(r)&&e.call(this,r,typeof n=="number"?n:void 0,i||void 0))}}function U(){return!0}function X(e){return e!==null&&typeof e=="object"&&"type"in e}const Z=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],ee=["button","input","select","textarea"],te=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],re={},g=B(["doctype","comment"]);function de(e){const r=ue((e||re).newlines?le:se);return function(n){j(n,{collapse:r,whitespace:"normal"})}}function j(e,t){if("children"in e){const r={...t};return(e.type==="root"||C(e))&&(r.before=!0,r.after=!0),r.whitespace=ae(e,t),ie(e,r)}if(e.type==="text"){if(t.whitespace==="normal")return ne(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:g(e),stripAtStart:!1,remove:!1}}function ne(e,t){const r=t.collapse(e.value),n={ignore:!1,stripAtStart:!1,remove:!1};let i=0,o=r.length;return t.before&&A(r.charAt(0))&&i++,i!==o&&A(r.charAt(o-1))&&(t.after?o--:n.stripAtStart=!0),i===o?n.remove=!0:e.value=r.slice(i,o),n}function ie(e,t){let r=t.before;const n=t.after,i=e.children;let o=i.length,c=-1;for(;++c<o;){const l=j(i[c],{...t,after:T(i,c,n),before:r});l.remove?(i.splice(c,1),c--,o--):l.ignore||(r=l.stripAtStart),$(i[c])&&(r=!1)}return{ignore:!1,stripAtStart:!!(r||n),remove:!1}}function T(e,t,r){for(;++t<e.length;){const n=e[t];let i=oe(n);if(i===void 0&&"children"in n&&!ce(n)&&(i=T(n.children,-1)),typeof i=="boolean")return i}return r}function oe(e){if(e.type==="element"){if($(e))return!1;if(C(e))return!0}else if(e.type==="text"){if(!W(e))return!1}else if(!g(e))return!1}function $(e){return I(e)||m(e,ee)}function C(e){return m(e,Z)}function ce(e){return!!(e.type==="element"&&e.properties.hidden)||g(e)||m(e,te)}function A(e){return e===" "||e===`
`}function le(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function se(){return" "}function ue(e){return t;function t(r){return String(r).replace(/[\t\n\v\f\r ]+/g,e)}}function ae(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}export{de as r,he as t};
