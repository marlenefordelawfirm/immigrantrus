var Jr=Object.defineProperty;var Kr=(y,v,l)=>v in y?Jr(y,v,{enumerable:!0,configurable:!0,writable:!0,value:l}):y[v]=l;var G=(y,v,l)=>Kr(y,typeof v!="symbol"?v+"":v,l);import{dW as Zr}from"./index.Dg3lKJeg.js";function et(y,v){for(var l=0;l<v.length;l++){const d=v[l];if(typeof d!="string"&&!Array.isArray(d)){for(const o in d)if(o!=="default"&&!(o in y)){const i=Object.getOwnPropertyDescriptor(d,o);i&&Object.defineProperty(y,o,i.get?i:{enumerable:!0,get:()=>d[o]})}}}return Object.freeze(Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}))}var J,He;function ze(){if(He)return J;He=1;var y="\0",v="\0",l="";class d{constructor(r){G(this,"_isDirected",!0);G(this,"_isMultigraph",!1);G(this,"_isCompound",!1);G(this,"_label");G(this,"_defaultNodeLabelFn",()=>{});G(this,"_defaultEdgeLabelFn",()=>{});G(this,"_nodes",{});G(this,"_in",{});G(this,"_preds",{});G(this,"_out",{});G(this,"_sucs",{});G(this,"_edgeObjs",{});G(this,"_edgeLabels",{});G(this,"_nodeCount",0);G(this,"_edgeCount",0);G(this,"_parent");G(this,"_children");r&&(this._isDirected=r.hasOwnProperty("directed")?r.directed:!0,this._isMultigraph=r.hasOwnProperty("multigraph")?r.multigraph:!1,this._isCompound=r.hasOwnProperty("compound")?r.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[v]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(r){return this._label=r,this}graph(){return this._label}setDefaultNodeLabel(r){return this._defaultNodeLabelFn=r,typeof r!="function"&&(this._defaultNodeLabelFn=()=>r),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var r=this;return this.nodes().filter(t=>Object.keys(r._in[t]).length===0)}sinks(){var r=this;return this.nodes().filter(t=>Object.keys(r._out[t]).length===0)}setNodes(r,t){var u=arguments,f=this;return r.forEach(function(E){u.length>1?f.setNode(E,t):f.setNode(E)}),this}setNode(r,t){return this._nodes.hasOwnProperty(r)?(arguments.length>1&&(this._nodes[r]=t),this):(this._nodes[r]=arguments.length>1?t:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=v,this._children[r]={},this._children[v][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)}node(r){return this._nodes[r]}hasNode(r){return this._nodes.hasOwnProperty(r)}removeNode(r){var t=this;if(this._nodes.hasOwnProperty(r)){var u=f=>t.removeEdge(t._edgeObjs[f]);delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],this.children(r).forEach(function(f){t.setParent(f)}),delete this._children[r]),Object.keys(this._in[r]).forEach(u),delete this._in[r],delete this._preds[r],Object.keys(this._out[r]).forEach(u),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this}setParent(r,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t===void 0)t=v;else{t+="";for(var u=t;u!==void 0;u=this.parent(u))if(u===r)throw new Error("Setting "+t+" as parent of "+r+" would create a cycle");this.setNode(t)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=t,this._children[t][r]=!0,this}_removeFromParentsChildList(r){delete this._children[this._parent[r]][r]}parent(r){if(this._isCompound){var t=this._parent[r];if(t!==v)return t}}children(r=v){if(this._isCompound){var t=this._children[r];if(t)return Object.keys(t)}else{if(r===v)return this.nodes();if(this.hasNode(r))return[]}}predecessors(r){var t=this._preds[r];if(t)return Object.keys(t)}successors(r){var t=this._sucs[r];if(t)return Object.keys(t)}neighbors(r){var t=this.predecessors(r);if(t){const f=new Set(t);for(var u of this.successors(r))f.add(u);return Array.from(f.values())}}isLeaf(r){var t;return this.isDirected()?t=this.successors(r):t=this.neighbors(r),t.length===0}filterNodes(r){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var u=this;Object.entries(this._nodes).forEach(function([C,p]){r(C)&&t.setNode(C,p)}),Object.values(this._edgeObjs).forEach(function(C){t.hasNode(C.v)&&t.hasNode(C.w)&&t.setEdge(C,u.edge(C))});var f={};function E(C){var p=u.parent(C);return p===void 0||t.hasNode(p)?(f[C]=p,p):p in f?f[p]:E(p)}return this._isCompound&&t.nodes().forEach(C=>t.setParent(C,E(C))),t}setDefaultEdgeLabel(r){return this._defaultEdgeLabelFn=r,typeof r!="function"&&(this._defaultEdgeLabelFn=()=>r),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(r,t){var u=this,f=arguments;return r.reduce(function(E,C){return f.length>1?u.setEdge(E,C,t):u.setEdge(E,C),C}),this}setEdge(){var r,t,u,f,E=!1,C=arguments[0];typeof C=="object"&&C!==null&&"v"in C?(r=C.v,t=C.w,u=C.name,arguments.length===2&&(f=arguments[1],E=!0)):(r=C,t=arguments[1],u=arguments[3],arguments.length>2&&(f=arguments[2],E=!0)),r=""+r,t=""+t,u!==void 0&&(u=""+u);var p=e(this._isDirected,r,t,u);if(this._edgeLabels.hasOwnProperty(p))return E&&(this._edgeLabels[p]=f),this;if(u!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(t),this._edgeLabels[p]=E?f:this._defaultEdgeLabelFn(r,t,u);var O=s(this._isDirected,r,t,u);return r=O.v,t=O.w,Object.freeze(O),this._edgeObjs[p]=O,o(this._preds[t],r),o(this._sucs[r],t),this._in[t][p]=O,this._out[r][p]=O,this._edgeCount++,this}edge(r,t,u){var f=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,u);return this._edgeLabels[f]}edgeAsObj(){const r=this.edge(...arguments);return typeof r!="object"?{label:r}:r}hasEdge(r,t,u){var f=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,u);return this._edgeLabels.hasOwnProperty(f)}removeEdge(r,t,u){var f=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,u),E=this._edgeObjs[f];return E&&(r=E.v,t=E.w,delete this._edgeLabels[f],delete this._edgeObjs[f],i(this._preds[t],r),i(this._sucs[r],t),delete this._in[t][f],delete this._out[r][f],this._edgeCount--),this}inEdges(r,t){var u=this._in[r];if(u){var f=Object.values(u);return t?f.filter(E=>E.v===t):f}}outEdges(r,t){var u=this._out[r];if(u){var f=Object.values(u);return t?f.filter(E=>E.w===t):f}}nodeEdges(r,t){var u=this.inEdges(r,t);if(u)return u.concat(this.outEdges(r,t))}}function o(a,r){a[r]?a[r]++:a[r]=1}function i(a,r){--a[r]||delete a[r]}function e(a,r,t,u){var f=""+r,E=""+t;if(!a&&f>E){var C=f;f=E,E=C}return f+l+E+l+(u===void 0?y:u)}function s(a,r,t,u){var f=""+r,E=""+t;if(!a&&f>E){var C=f;f=E,E=C}var p={v:f,w:E};return u&&(p.name=u),p}function n(a,r){return e(a,r.v,r.w,r.name)}return J=d,J}var K,Qe;function rt(){return Qe||(Qe=1,K="2.2.2"),K}var Z,$e;function tt(){return $e||($e=1,Z={Graph:ze(),version:rt()}),Z}var ee,Je;function nt(){if(Je)return ee;Je=1;var y=ze();ee={write:v,read:o};function v(i){var e={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:l(i),edges:d(i)};return i.graph()!==void 0&&(e.value=structuredClone(i.graph())),e}function l(i){return i.nodes().map(function(e){var s=i.node(e),n=i.parent(e),a={v:e};return s!==void 0&&(a.value=s),n!==void 0&&(a.parent=n),a})}function d(i){return i.edges().map(function(e){var s=i.edge(e),n={v:e.v,w:e.w};return e.name!==void 0&&(n.name=e.name),s!==void 0&&(n.value=s),n})}function o(i){var e=new y(i.options).setGraph(i.value);return i.nodes.forEach(function(s){e.setNode(s.v,s.value),s.parent&&e.setParent(s.v,s.parent)}),i.edges.forEach(function(s){e.setEdge({v:s.v,w:s.w,name:s.name},s.value)}),e}return ee}var re,Ke;function it(){if(Ke)return re;Ke=1,re=y;function y(v){var l={},d=[],o;function i(e){l.hasOwnProperty(e)||(l[e]=!0,o.push(e),v.successors(e).forEach(i),v.predecessors(e).forEach(i))}return v.nodes().forEach(function(e){o=[],i(e),o.length&&d.push(o)}),d}return re}var te,Ze;function Vr(){if(Ze)return te;Ze=1;class y{constructor(){G(this,"_arr",[]);G(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(l){return l.key})}has(l){return this._keyIndices.hasOwnProperty(l)}priority(l){var d=this._keyIndices[l];if(d!==void 0)return this._arr[d].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(l,d){var o=this._keyIndices;if(l=String(l),!o.hasOwnProperty(l)){var i=this._arr,e=i.length;return o[l]=e,i.push({key:l,priority:d}),this._decrease(e),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var l=this._arr.pop();return delete this._keyIndices[l.key],this._heapify(0),l.key}decrease(l,d){var o=this._keyIndices[l];if(d>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+l+" Old: "+this._arr[o].priority+" New: "+d);this._arr[o].priority=d,this._decrease(o)}_heapify(l){var d=this._arr,o=2*l,i=o+1,e=l;o<d.length&&(e=d[o].priority<d[e].priority?o:e,i<d.length&&(e=d[i].priority<d[e].priority?i:e),e!==l&&(this._swap(l,e),this._heapify(e)))}_decrease(l){for(var d=this._arr,o=d[l].priority,i;l!==0&&(i=l>>1,!(d[i].priority<o));)this._swap(l,i),l=i}_swap(l,d){var o=this._arr,i=this._keyIndices,e=o[l],s=o[d];o[l]=s,o[d]=e,i[s.key]=l,i[e.key]=d}}return te=y,te}var ne,er;function Br(){if(er)return ne;er=1;var y=Vr();ne=l;var v=()=>1;function l(o,i,e,s){return d(o,String(i),e||v,s||function(n){return o.outEdges(n)})}function d(o,i,e,s){var n={},a=new y,r,t,u=function(f){var E=f.v!==r?f.v:f.w,C=n[E],p=e(f),O=t.distance+p;if(p<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+f+" Weight: "+p);O<C.distance&&(C.distance=O,C.predecessor=r,a.decrease(E,O))};for(o.nodes().forEach(function(f){var E=f===i?0:Number.POSITIVE_INFINITY;n[f]={distance:E},a.add(f,E)});a.size()>0&&(r=a.removeMin(),t=n[r],t.distance!==Number.POSITIVE_INFINITY);)s(r).forEach(u);return n}return ne}var ie,rr;function at(){if(rr)return ie;rr=1;var y=Br();ie=v;function v(l,d,o){return l.nodes().reduce(function(i,e){return i[e]=y(l,e,d,o),i},{})}return ie}var ae,tr;function Yr(){if(tr)return ae;tr=1,ae=y;function y(v){var l=0,d=[],o={},i=[];function e(s){var n=o[s]={onStack:!0,lowlink:l,index:l++};if(d.push(s),v.successors(s).forEach(function(t){o.hasOwnProperty(t)?o[t].onStack&&(n.lowlink=Math.min(n.lowlink,o[t].index)):(e(t),n.lowlink=Math.min(n.lowlink,o[t].lowlink))}),n.lowlink===n.index){var a=[],r;do r=d.pop(),o[r].onStack=!1,a.push(r);while(s!==r);i.push(a)}}return v.nodes().forEach(function(s){o.hasOwnProperty(s)||e(s)}),i}return ae}var oe,nr;function ot(){if(nr)return oe;nr=1;var y=Yr();oe=v;function v(l){return y(l).filter(function(d){return d.length>1||d.length===1&&l.hasEdge(d[0],d[0])})}return oe}var se,ir;function st(){if(ir)return se;ir=1,se=v;var y=()=>1;function v(d,o,i){return l(d,o||y,i||function(e){return d.outEdges(e)})}function l(d,o,i){var e={},s=d.nodes();return s.forEach(function(n){e[n]={},e[n][n]={distance:0},s.forEach(function(a){n!==a&&(e[n][a]={distance:Number.POSITIVE_INFINITY})}),i(n).forEach(function(a){var r=a.v===n?a.w:a.v,t=o(a);e[n][r]={distance:t,predecessor:n}})}),s.forEach(function(n){var a=e[n];s.forEach(function(r){var t=e[r];s.forEach(function(u){var f=t[n],E=a[u],C=t[u],p=f.distance+E.distance;p<C.distance&&(C.distance=p,C.predecessor=E.predecessor)})})}),e}return se}var de,ar;function zr(){if(ar)return de;ar=1;function y(l){var d={},o={},i=[];function e(s){if(o.hasOwnProperty(s))throw new v;d.hasOwnProperty(s)||(o[s]=!0,d[s]=!0,l.predecessors(s).forEach(e),delete o[s],i.push(s))}if(l.sinks().forEach(e),Object.keys(d).length!==l.nodeCount())throw new v;return i}class v extends Error{constructor(){super(...arguments)}}return de=y,y.CycleException=v,de}var ue,or;function dt(){if(or)return ue;or=1;var y=zr();ue=v;function v(l){try{y(l)}catch(d){if(d instanceof y.CycleException)return!1;throw d}return!0}return ue}var le,sr;function Wr(){if(sr)return le;sr=1,le=y;function y(o,i,e){Array.isArray(i)||(i=[i]);var s=o.isDirected()?t=>o.successors(t):t=>o.neighbors(t),n=e==="post"?v:l,a=[],r={};return i.forEach(t=>{if(!o.hasNode(t))throw new Error("Graph does not have node: "+t);n(t,s,r,a)}),a}function v(o,i,e,s){for(var n=[[o,!1]];n.length>0;){var a=n.pop();a[1]?s.push(a[0]):e.hasOwnProperty(a[0])||(e[a[0]]=!0,n.push([a[0],!0]),d(i(a[0]),r=>n.push([r,!1])))}}function l(o,i,e,s){for(var n=[o];n.length>0;){var a=n.pop();e.hasOwnProperty(a)||(e[a]=!0,s.push(a),d(i(a),r=>n.push(r)))}}function d(o,i){for(var e=o.length;e--;)i(o[e],e,o);return o}return le}var he,dr;function ut(){if(dr)return he;dr=1;var y=Wr();he=v;function v(l,d){return y(l,d,"post")}return he}var fe,ur;function lt(){if(ur)return fe;ur=1;var y=Wr();fe=v;function v(l,d){return y(l,d,"pre")}return fe}var ce,lr;function ht(){if(lr)return ce;lr=1;var y=ze(),v=Vr();ce=l;function l(d,o){var i=new y,e={},s=new v,n;function a(t){var u=t.v===n?t.w:t.v,f=s.priority(u);if(f!==void 0){var E=o(t);E<f&&(e[u]=n,s.decrease(u,E))}}if(d.nodeCount()===0)return i;d.nodes().forEach(function(t){s.add(t,Number.POSITIVE_INFINITY),i.setNode(t)}),s.decrease(d.nodes()[0],0);for(var r=!1;s.size()>0;){if(n=s.removeMin(),e.hasOwnProperty(n))i.setEdge(n,e[n]);else{if(r)throw new Error("Input graph is not connected: "+d);r=!0}d.nodeEdges(n).forEach(a)}return i}return ce}var pe,hr;function ft(){return hr||(hr=1,pe={components:it(),dijkstra:Br(),dijkstraAll:at(),findCycles:ot(),floydWarshall:st(),isAcyclic:dt(),postorder:ut(),preorder:lt(),prim:ht(),tarjan:Yr(),topsort:zr()}),pe}var me,fr;function z(){if(fr)return me;fr=1;var y=tt();return me={Graph:y.Graph,json:nt(),alg:ft(),version:y.version},me}var ve,cr;function ct(){if(cr)return ve;cr=1;class y{constructor(){let o={};o._next=o._prev=o,this._sentinel=o}dequeue(){let o=this._sentinel,i=o._prev;if(i!==o)return v(i),i}enqueue(o){let i=this._sentinel;o._prev&&o._next&&v(o),o._next=i._next,i._next._prev=o,i._next=o,o._prev=i}toString(){let o=[],i=this._sentinel,e=i._prev;for(;e!==i;)o.push(JSON.stringify(e,l)),e=e._prev;return"["+o.join(", ")+"]"}}function v(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function l(d,o){if(d!=="_next"&&d!=="_prev")return o}return ve=y,ve}var we,pr;function pt(){if(pr)return we;pr=1;let y=z().Graph,v=ct();we=d;let l=()=>1;function d(a,r){if(a.nodeCount()<=1)return[];let t=e(a,r||l);return o(t.graph,t.buckets,t.zeroIdx).flatMap(f=>a.outEdges(f.v,f.w))}function o(a,r,t){let u=[],f=r[r.length-1],E=r[0],C;for(;a.nodeCount();){for(;C=E.dequeue();)i(a,r,t,C);for(;C=f.dequeue();)i(a,r,t,C);if(a.nodeCount()){for(let p=r.length-2;p>0;--p)if(C=r[p].dequeue(),C){u=u.concat(i(a,r,t,C,!0));break}}}return u}function i(a,r,t,u,f){let E=f?[]:void 0;return a.inEdges(u.v).forEach(C=>{let p=a.edge(C),O=a.node(C.v);f&&E.push({v:C.v,w:C.w}),O.out-=p,s(r,t,O)}),a.outEdges(u.v).forEach(C=>{let p=a.edge(C),O=C.w,m=a.node(O);m.in-=p,s(r,t,m)}),a.removeNode(u.v),E}function e(a,r){let t=new y,u=0,f=0;a.nodes().forEach(p=>{t.setNode(p,{v:p,in:0,out:0})}),a.edges().forEach(p=>{let O=t.edge(p.v,p.w)||0,m=r(p),N=O+m;t.setEdge(p.v,p.w,N),f=Math.max(f,t.node(p.v).out+=m),u=Math.max(u,t.node(p.w).in+=m)});let E=n(f+u+3).map(()=>new v),C=u+1;return t.nodes().forEach(p=>{s(E,C,t.node(p))}),{graph:t,buckets:E,zeroIdx:C}}function s(a,r,t){t.out?t.in?a[t.out-t.in+r].enqueue(t):a[a.length-1].enqueue(t):a[0].enqueue(t)}function n(a){const r=[];for(let t=0;t<a;t++)r.push(t);return r}return we}var be,mr;function F(){if(mr)return be;mr=1;let y=z().Graph;be={addBorderNode:r,addDummyNode:v,asNonCompoundGraph:d,buildLayerMatrix:s,intersectRect:e,mapValues:N,maxRank:t,normalizeRanks:n,notime:E,partition:u,pick:m,predecessorWeights:i,range:O,removeEmptyRanks:a,simplify:l,successorWeights:o,time:f,uniqueId:p,zipObject:x};function v(h,c,g,b){let _;do _=p(b);while(h.hasNode(_));return g.dummy=c,h.setNode(_,g),_}function l(h){let c=new y().setGraph(h.graph());return h.nodes().forEach(g=>c.setNode(g,h.node(g))),h.edges().forEach(g=>{let b=c.edge(g.v,g.w)||{weight:0,minlen:1},_=h.edge(g);c.setEdge(g.v,g.w,{weight:b.weight+_.weight,minlen:Math.max(b.minlen,_.minlen)})}),c}function d(h){let c=new y({multigraph:h.isMultigraph()}).setGraph(h.graph());return h.nodes().forEach(g=>{h.children(g).length||c.setNode(g,h.node(g))}),h.edges().forEach(g=>{c.setEdge(g,h.edge(g))}),c}function o(h){let c=h.nodes().map(g=>{let b={};return h.outEdges(g).forEach(_=>{b[_.w]=(b[_.w]||0)+h.edge(_).weight}),b});return x(h.nodes(),c)}function i(h){let c=h.nodes().map(g=>{let b={};return h.inEdges(g).forEach(_=>{b[_.v]=(b[_.v]||0)+h.edge(_).weight}),b});return x(h.nodes(),c)}function e(h,c){let g=h.x,b=h.y,_=c.x-g,R=c.y-b,q=h.width/2,L=h.height/2;if(!_&&!R)throw new Error("Not possible to find intersection inside of the rectangle");let S,T;return Math.abs(R)*q>Math.abs(_)*L?(R<0&&(L=-L),S=L*_/R,T=L):(_<0&&(q=-q),S=q,T=q*R/_),{x:g+S,y:b+T}}function s(h){let c=O(t(h)+1).map(()=>[]);return h.nodes().forEach(g=>{let b=h.node(g),_=b.rank;_!==void 0&&(c[_][b.order]=g)}),c}function n(h){let c=Math.min(...h.nodes().map(g=>{let b=h.node(g).rank;return b===void 0?Number.MAX_VALUE:b}));h.nodes().forEach(g=>{let b=h.node(g);b.hasOwnProperty("rank")&&(b.rank-=c)})}function a(h){let c=Math.min(...h.nodes().map(R=>h.node(R).rank)),g=[];h.nodes().forEach(R=>{let q=h.node(R).rank-c;g[q]||(g[q]=[]),g[q].push(R)});let b=0,_=h.graph().nodeRankFactor;Array.from(g).forEach((R,q)=>{R===void 0&&q%_!==0?--b:R!==void 0&&b&&R.forEach(L=>h.node(L).rank+=b)})}function r(h,c,g,b){let _={width:0,height:0};return arguments.length>=4&&(_.rank=g,_.order=b),v(h,"border",_,c)}function t(h){return Math.max(...h.nodes().map(c=>{let g=h.node(c).rank;return g===void 0?Number.MIN_VALUE:g}))}function u(h,c){let g={lhs:[],rhs:[]};return h.forEach(b=>{c(b)?g.lhs.push(b):g.rhs.push(b)}),g}function f(h,c){let g=Date.now();try{return c()}finally{console.log(h+" time: "+(Date.now()-g)+"ms")}}function E(h,c){return c()}let C=0;function p(h){var c=++C;return toString(h)+c}function O(h,c,g=1){c==null&&(c=h,h=0);let b=R=>R<c;g<0&&(b=R=>c<R);const _=[];for(let R=h;b(R);R+=g)_.push(R);return _}function m(h,c){const g={};for(const b of c)h[b]!==void 0&&(g[b]=h[b]);return g}function N(h,c){let g=c;return typeof c=="string"&&(g=b=>b[c]),Object.entries(h).reduce((b,[_,R])=>(b[_]=g(R,_),b),{})}function x(h,c){return h.reduce((g,b,_)=>(g[b]=c[_],g),{})}return be}var ge,vr;function mt(){if(vr)return ge;vr=1;let y=pt(),v=F().uniqueId;ge={run:l,undo:o};function l(i){(i.graph().acyclicer==="greedy"?y(i,s(i)):d(i)).forEach(n=>{let a=i.edge(n);i.removeEdge(n),a.forwardName=n.name,a.reversed=!0,i.setEdge(n.w,n.v,a,v("rev"))});function s(n){return a=>n.edge(a).weight}}function d(i){let e=[],s={},n={};function a(r){n.hasOwnProperty(r)||(n[r]=!0,s[r]=!0,i.outEdges(r).forEach(t=>{s.hasOwnProperty(t.w)?e.push(t):a(t.w)}),delete s[r])}return i.nodes().forEach(a),e}function o(i){i.edges().forEach(e=>{let s=i.edge(e);if(s.reversed){i.removeEdge(e);let n=s.forwardName;delete s.reversed,delete s.forwardName,i.setEdge(e.w,e.v,s,n)}})}return ge}var Ee,wr;function vt(){if(wr)return Ee;wr=1;let y=F();Ee={run:v,undo:d};function v(o){o.graph().dummyChains=[],o.edges().forEach(i=>l(o,i))}function l(o,i){let e=i.v,s=o.node(e).rank,n=i.w,a=o.node(n).rank,r=i.name,t=o.edge(i),u=t.labelRank;if(a===s+1)return;o.removeEdge(i);let f,E,C;for(C=0,++s;s<a;++C,++s)t.points=[],E={width:0,height:0,edgeLabel:t,edgeObj:i,rank:s},f=y.addDummyNode(o,"edge",E,"_d"),s===u&&(E.width=t.width,E.height=t.height,E.dummy="edge-label",E.labelpos=t.labelpos),o.setEdge(e,f,{weight:t.weight},r),C===0&&o.graph().dummyChains.push(f),e=f;o.setEdge(e,n,{weight:t.weight},r)}function d(o){o.graph().dummyChains.forEach(i=>{let e=o.node(i),s=e.edgeLabel,n;for(o.setEdge(e.edgeObj,s);e.dummy;)n=o.successors(i)[0],o.removeNode(i),s.points.push({x:e.x,y:e.y}),e.dummy==="edge-label"&&(s.x=e.x,s.y=e.y,s.width=e.width,s.height=e.height),i=n,e=o.node(i)})}return Ee}var ye,br;function H(){if(br)return ye;br=1,ye={longestPath:y,slack:v};function y(l){var d={};function o(i){var e=l.node(i);if(d.hasOwnProperty(i))return e.rank;d[i]=!0;var s=Math.min(...l.outEdges(i).map(n=>n==null?Number.POSITIVE_INFINITY:o(n.w)-l.edge(n).minlen));return s===Number.POSITIVE_INFINITY&&(s=0),e.rank=s}l.sources().forEach(o)}function v(l,d){return l.node(d.w).rank-l.node(d.v).rank-l.edge(d).minlen}return ye}var _e,gr;function Ur(){if(gr)return _e;gr=1;var y=z().Graph,v=H().slack;_e=l;function l(e){var s=new y({directed:!1}),n=e.nodes()[0],a=e.nodeCount();s.setNode(n,{});for(var r,t;d(s,e)<a;)r=o(s,e),t=s.hasNode(r.v)?v(e,r):-v(e,r),i(s,e,t);return s}function d(e,s){function n(a){s.nodeEdges(a).forEach(r=>{var t=r.v,u=a===t?r.w:t;!e.hasNode(u)&&!v(s,r)&&(e.setNode(u,{}),e.setEdge(a,u,{}),n(u))})}return e.nodes().forEach(n),e.nodeCount()}function o(e,s){return s.edges().reduce((a,r)=>{let t=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(t=v(s,r)),t<a[0]?[t,r]:a},[Number.POSITIVE_INFINITY,null])[1]}function i(e,s,n){e.nodes().forEach(a=>s.node(a).rank+=n)}return _e}var ke,Er;function wt(){if(Er)return ke;Er=1;var y=Ur(),v=H().slack,l=H().longestPath,d=z().alg.preorder,o=z().alg.postorder,i=F().simplify;ke=e,e.initLowLimValues=r,e.initCutValues=s,e.calcCutValue=a,e.leaveEdge=u,e.enterEdge=f,e.exchangeEdges=E;function e(m){m=i(m),l(m);var N=y(m);r(N),s(N,m);for(var x,h;x=u(N);)h=f(N,m,x),E(N,m,x,h)}function s(m,N){var x=o(m,m.nodes());x=x.slice(0,x.length-1),x.forEach(h=>n(m,N,h))}function n(m,N,x){var h=m.node(x),c=h.parent;m.edge(x,c).cutvalue=a(m,N,x)}function a(m,N,x){var h=m.node(x),c=h.parent,g=!0,b=N.edge(x,c),_=0;return b||(g=!1,b=N.edge(c,x)),_=b.weight,N.nodeEdges(x).forEach(R=>{var q=R.v===x,L=q?R.w:R.v;if(L!==c){var S=q===g,T=N.edge(R).weight;if(_+=S?T:-T,p(m,x,L)){var V=m.edge(x,L).cutvalue;_+=S?-V:V}}}),_}function r(m,N){arguments.length<2&&(N=m.nodes()[0]),t(m,{},1,N)}function t(m,N,x,h,c){var g=x,b=m.node(h);return N[h]=!0,m.neighbors(h).forEach(_=>{N.hasOwnProperty(_)||(x=t(m,N,x,_,h))}),b.low=g,b.lim=x++,c?b.parent=c:delete b.parent,x}function u(m){return m.edges().find(N=>m.edge(N).cutvalue<0)}function f(m,N,x){var h=x.v,c=x.w;N.hasEdge(h,c)||(h=x.w,c=x.v);var g=m.node(h),b=m.node(c),_=g,R=!1;g.lim>b.lim&&(_=b,R=!0);var q=N.edges().filter(L=>R===O(m,m.node(L.v),_)&&R!==O(m,m.node(L.w),_));return q.reduce((L,S)=>v(N,S)<v(N,L)?S:L)}function E(m,N,x,h){var c=x.v,g=x.w;m.removeEdge(c,g),m.setEdge(h.v,h.w,{}),r(m),s(m,N),C(m,N)}function C(m,N){var x=m.nodes().find(c=>!N.node(c).parent),h=d(m,x);h=h.slice(1),h.forEach(c=>{var g=m.node(c).parent,b=N.edge(c,g),_=!1;b||(b=N.edge(g,c),_=!0),N.node(c).rank=N.node(g).rank+(_?b.minlen:-b.minlen)})}function p(m,N,x){return m.hasEdge(N,x)}function O(m,N,x){return x.low<=N.lim&&N.lim<=x.lim}return ke}var Ne,yr;function bt(){if(yr)return Ne;yr=1;var y=H(),v=y.longestPath,l=Ur(),d=wt();Ne=o;function o(n){switch(n.graph().ranker){case"network-simplex":s(n);break;case"tight-tree":e(n);break;case"longest-path":i(n);break;default:s(n)}}var i=v;function e(n){v(n),l(n)}function s(n){d(n)}return Ne}var Oe,_r;function gt(){if(_r)return Oe;_r=1,Oe=y;function y(d){let o=l(d);d.graph().dummyChains.forEach(i=>{let e=d.node(i),s=e.edgeObj,n=v(d,o,s.v,s.w),a=n.path,r=n.lca,t=0,u=a[t],f=!0;for(;i!==s.w;){if(e=d.node(i),f){for(;(u=a[t])!==r&&d.node(u).maxRank<e.rank;)t++;u===r&&(f=!1)}if(!f){for(;t<a.length-1&&d.node(u=a[t+1]).minRank<=e.rank;)t++;u=a[t]}d.setParent(i,u),i=d.successors(i)[0]}})}function v(d,o,i,e){let s=[],n=[],a=Math.min(o[i].low,o[e].low),r=Math.max(o[i].lim,o[e].lim),t,u;t=i;do t=d.parent(t),s.push(t);while(t&&(o[t].low>a||r>o[t].lim));for(u=t,t=e;(t=d.parent(t))!==u;)n.push(t);return{path:s.concat(n.reverse()),lca:u}}function l(d){let o={},i=0;function e(s){let n=i;d.children(s).forEach(e),o[s]={low:n,lim:i++}}return d.children().forEach(e),o}return Oe}var xe,kr;function Et(){if(kr)return xe;kr=1;let y=F();xe={run:v,cleanup:i};function v(e){let s=y.addDummyNode(e,"root",{},"_root"),n=d(e),a=Math.max(...Object.values(n))-1,r=2*a+1;e.graph().nestingRoot=s,e.edges().forEach(u=>e.edge(u).minlen*=r);let t=o(e)+1;e.children().forEach(u=>l(e,s,r,t,a,n,u)),e.graph().nodeRankFactor=r}function l(e,s,n,a,r,t,u){let f=e.children(u);if(!f.length){u!==s&&e.setEdge(s,u,{weight:0,minlen:n});return}let E=y.addBorderNode(e,"_bt"),C=y.addBorderNode(e,"_bb"),p=e.node(u);e.setParent(E,u),p.borderTop=E,e.setParent(C,u),p.borderBottom=C,f.forEach(O=>{l(e,s,n,a,r,t,O);let m=e.node(O),N=m.borderTop?m.borderTop:O,x=m.borderBottom?m.borderBottom:O,h=m.borderTop?a:2*a,c=N!==x?1:r-t[u]+1;e.setEdge(E,N,{weight:h,minlen:c,nestingEdge:!0}),e.setEdge(x,C,{weight:h,minlen:c,nestingEdge:!0})}),e.parent(u)||e.setEdge(s,E,{weight:0,minlen:r+t[u]})}function d(e){var s={};function n(a,r){var t=e.children(a);t&&t.length&&t.forEach(u=>n(u,r+1)),s[a]=r}return e.children().forEach(a=>n(a,1)),s}function o(e){return e.edges().reduce((s,n)=>s+e.edge(n).weight,0)}function i(e){var s=e.graph();e.removeNode(s.nestingRoot),delete s.nestingRoot,e.edges().forEach(n=>{var a=e.edge(n);a.nestingEdge&&e.removeEdge(n)})}return xe}var Ie,Nr;function yt(){if(Nr)return Ie;Nr=1;let y=F();Ie=v;function v(d){function o(i){let e=d.children(i),s=d.node(i);if(e.length&&e.forEach(o),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let n=s.minRank,a=s.maxRank+1;n<a;++n)l(d,"borderLeft","_bl",i,s,n),l(d,"borderRight","_br",i,s,n)}}d.children().forEach(o)}function l(d,o,i,e,s,n){let a={width:0,height:0,rank:n,borderType:o},r=s[o][n-1],t=y.addDummyNode(d,"border",a,i);s[o][n]=t,d.setParent(t,e),r&&d.setEdge(r,t,{weight:1})}return Ie}var Ce,Or;function _t(){if(Or)return Ce;Or=1,Ce={adjust:y,undo:v};function y(n){let a=n.graph().rankdir.toLowerCase();(a==="lr"||a==="rl")&&l(n)}function v(n){let a=n.graph().rankdir.toLowerCase();(a==="bt"||a==="rl")&&o(n),(a==="lr"||a==="rl")&&(e(n),l(n))}function l(n){n.nodes().forEach(a=>d(n.node(a))),n.edges().forEach(a=>d(n.edge(a)))}function d(n){let a=n.width;n.width=n.height,n.height=a}function o(n){n.nodes().forEach(a=>i(n.node(a))),n.edges().forEach(a=>{let r=n.edge(a);r.points.forEach(i),r.hasOwnProperty("y")&&i(r)})}function i(n){n.y=-n.y}function e(n){n.nodes().forEach(a=>s(n.node(a))),n.edges().forEach(a=>{let r=n.edge(a);r.points.forEach(s),r.hasOwnProperty("x")&&s(r)})}function s(n){let a=n.x;n.x=n.y,n.y=a}return Ce}var Re,xr;function kt(){if(xr)return Re;xr=1;let y=F();Re=v;function v(l){let d={},o=l.nodes().filter(a=>!l.children(a).length),i=Math.max(...o.map(a=>l.node(a).rank)),e=y.range(i+1).map(()=>[]);function s(a){if(d[a])return;d[a]=!0;let r=l.node(a);e[r.rank].push(a),l.successors(a).forEach(s)}return o.sort((a,r)=>l.node(a).rank-l.node(r).rank).forEach(s),e}return Re}var Pe,Ir;function Nt(){if(Ir)return Pe;Ir=1;let y=F().zipObject;Pe=v;function v(d,o){let i=0;for(let e=1;e<o.length;++e)i+=l(d,o[e-1],o[e]);return i}function l(d,o,i){let e=y(i,i.map((u,f)=>f)),s=o.flatMap(u=>d.outEdges(u).map(f=>({pos:e[f.w],weight:d.edge(f).weight})).sort((f,E)=>f.pos-E.pos)),n=1;for(;n<i.length;)n<<=1;let a=2*n-1;n-=1;let r=new Array(a).fill(0),t=0;return s.forEach(u=>{let f=u.pos+n;r[f]+=u.weight;let E=0;for(;f>0;)f%2&&(E+=r[f+1]),f=f-1>>1,r[f]+=u.weight;t+=u.weight*E}),t}return Pe}var qe,Cr;function Ot(){if(Cr)return qe;Cr=1,qe=y;function y(v,l=[]){return l.map(d=>{let o=v.inEdges(d);if(o.length){let i=o.reduce((e,s)=>{let n=v.edge(s),a=v.node(s.v);return{sum:e.sum+n.weight*a.order,weight:e.weight+n.weight}},{sum:0,weight:0});return{v:d,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:d}})}return qe}var Le,Rr;function xt(){if(Rr)return Le;Rr=1;let y=F();Le=v;function v(o,i){let e={};o.forEach((n,a)=>{let r=e[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:a};n.barycenter!==void 0&&(r.barycenter=n.barycenter,r.weight=n.weight)}),i.edges().forEach(n=>{let a=e[n.v],r=e[n.w];a!==void 0&&r!==void 0&&(r.indegree++,a.out.push(e[n.w]))});let s=Object.values(e).filter(n=>!n.indegree);return l(s)}function l(o){let i=[];function e(n){return a=>{a.merged||(a.barycenter===void 0||n.barycenter===void 0||a.barycenter>=n.barycenter)&&d(n,a)}}function s(n){return a=>{a.in.push(n),--a.indegree===0&&o.push(a)}}for(;o.length;){let n=o.pop();i.push(n),n.in.reverse().forEach(e(n)),n.out.forEach(s(n))}return i.filter(n=>!n.merged).map(n=>y.pick(n,["vs","i","barycenter","weight"]))}function d(o,i){let e=0,s=0;o.weight&&(e+=o.barycenter*o.weight,s+=o.weight),i.weight&&(e+=i.barycenter*i.weight,s+=i.weight),o.vs=i.vs.concat(o.vs),o.barycenter=e/s,o.weight=s,o.i=Math.min(i.i,o.i),i.merged=!0}return Le}var je,Pr;function It(){if(Pr)return je;Pr=1;let y=F();je=v;function v(o,i){let e=y.partition(o,E=>E.hasOwnProperty("barycenter")),s=e.lhs,n=e.rhs.sort((E,C)=>C.i-E.i),a=[],r=0,t=0,u=0;s.sort(d(!!i)),u=l(a,n,u),s.forEach(E=>{u+=E.vs.length,a.push(E.vs),r+=E.barycenter*E.weight,t+=E.weight,u=l(a,n,u)});let f={vs:a.flat(!0)};return t&&(f.barycenter=r/t,f.weight=t),f}function l(o,i,e){let s;for(;i.length&&(s=i[i.length-1]).i<=e;)i.pop(),o.push(s.vs),e++;return e}function d(o){return(i,e)=>i.barycenter<e.barycenter?-1:i.barycenter>e.barycenter?1:o?e.i-i.i:i.i-e.i}return je}var Se,qr;function Ct(){if(qr)return Se;qr=1;let y=Ot(),v=xt(),l=It();Se=d;function d(e,s,n,a){let r=e.children(s),t=e.node(s),u=t?t.borderLeft:void 0,f=t?t.borderRight:void 0,E={};u&&(r=r.filter(m=>m!==u&&m!==f));let C=y(e,r);C.forEach(m=>{if(e.children(m.v).length){let N=d(e,m.v,n,a);E[m.v]=N,N.hasOwnProperty("barycenter")&&i(m,N)}});let p=v(C,n);o(p,E);let O=l(p,a);if(u&&(O.vs=[u,O.vs,f].flat(!0),e.predecessors(u).length)){let m=e.node(e.predecessors(u)[0]),N=e.node(e.predecessors(f)[0]);O.hasOwnProperty("barycenter")||(O.barycenter=0,O.weight=0),O.barycenter=(O.barycenter*O.weight+m.order+N.order)/(O.weight+2),O.weight+=2}return O}function o(e,s){e.forEach(n=>{n.vs=n.vs.flatMap(a=>s[a]?s[a].vs:a)})}function i(e,s){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+s.barycenter*s.weight)/(e.weight+s.weight),e.weight+=s.weight):(e.barycenter=s.barycenter,e.weight=s.weight)}return Se}var Te,Lr;function Rt(){if(Lr)return Te;Lr=1;let y=z().Graph,v=F();Te=l;function l(o,i,e){let s=d(o),n=new y({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(a=>o.node(a));return o.nodes().forEach(a=>{let r=o.node(a),t=o.parent(a);(r.rank===i||r.minRank<=i&&i<=r.maxRank)&&(n.setNode(a),n.setParent(a,t||s),o[e](a).forEach(u=>{let f=u.v===a?u.w:u.v,E=n.edge(f,a),C=E!==void 0?E.weight:0;n.setEdge(f,a,{weight:o.edge(u).weight+C})}),r.hasOwnProperty("minRank")&&n.setNode(a,{borderLeft:r.borderLeft[i],borderRight:r.borderRight[i]}))}),n}function d(o){for(var i;o.hasNode(i=v.uniqueId("_root")););return i}return Te}var Me,jr;function Pt(){if(jr)return Me;jr=1,Me=y;function y(v,l,d){let o={},i;d.forEach(e=>{let s=v.parent(e),n,a;for(;s;){if(n=v.parent(s),n?(a=o[n],o[n]=s):(a=i,i=s),a&&a!==s){l.setEdge(a,s);return}s=n}})}return Me}var De,Sr;function qt(){if(Sr)return De;Sr=1;let y=kt(),v=Nt(),l=Ct(),d=Rt(),o=Pt(),i=z().Graph,e=F();De=s;function s(t,u){if(u&&typeof u.customOrder=="function"){u.customOrder(t,s);return}let f=e.maxRank(t),E=n(t,e.range(1,f+1),"inEdges"),C=n(t,e.range(f-1,-1,-1),"outEdges"),p=y(t);if(r(t,p),u&&u.disableOptimalOrderHeuristic)return;let O=Number.POSITIVE_INFINITY,m;for(let N=0,x=0;x<4;++N,++x){a(N%2?E:C,N%4>=2),p=e.buildLayerMatrix(t);let h=v(t,p);h<O&&(x=0,m=Object.assign({},p),O=h)}r(t,m)}function n(t,u,f){return u.map(function(E){return d(t,E,f)})}function a(t,u){let f=new i;t.forEach(function(E){let C=E.graph().root,p=l(E,C,f,u);p.vs.forEach((O,m)=>E.node(O).order=m),o(E,f,p.vs)})}function r(t,u){Object.values(u).forEach(f=>f.forEach((E,C)=>t.node(E).order=C))}return De}var Ge,Tr;function Lt(){if(Tr)return Ge;Tr=1;let y=z().Graph,v=F();Ge={positionX:f,findType1Conflicts:l,findType2Conflicts:d,addConflict:i,hasConflict:e,verticalAlignment:s,horizontalCompaction:n,alignCoordinates:t,findSmallestWidthAlignment:r,balance:u};function l(p,O){let m={};function N(x,h){let c=0,g=0,b=x.length,_=h[h.length-1];return h.forEach((R,q)=>{let L=o(p,R),S=L?p.node(L).order:b;(L||R===_)&&(h.slice(g,q+1).forEach(T=>{p.predecessors(T).forEach(V=>{let U=p.node(V),X=U.order;(X<c||S<X)&&!(U.dummy&&p.node(T).dummy)&&i(m,V,T)})}),g=q+1,c=S)}),h}return O.length&&O.reduce(N),m}function d(p,O){let m={};function N(h,c,g,b,_){let R;v.range(c,g).forEach(q=>{R=h[q],p.node(R).dummy&&p.predecessors(R).forEach(L=>{let S=p.node(L);S.dummy&&(S.order<b||S.order>_)&&i(m,L,R)})})}function x(h,c){let g=-1,b,_=0;return c.forEach((R,q)=>{if(p.node(R).dummy==="border"){let L=p.predecessors(R);L.length&&(b=p.node(L[0]).order,N(c,_,q,g,b),_=q,g=b)}N(c,_,c.length,b,h.length)}),c}return O.length&&O.reduce(x),m}function o(p,O){if(p.node(O).dummy)return p.predecessors(O).find(m=>p.node(m).dummy)}function i(p,O,m){if(O>m){let x=O;O=m,m=x}let N=p[O];N||(p[O]=N={}),N[m]=!0}function e(p,O,m){if(O>m){let N=O;O=m,m=N}return!!p[O]&&p[O].hasOwnProperty(m)}function s(p,O,m,N){let x={},h={},c={};return O.forEach(g=>{g.forEach((b,_)=>{x[b]=b,h[b]=b,c[b]=_})}),O.forEach(g=>{let b=-1;g.forEach(_=>{let R=N(_);if(R.length){R=R.sort((L,S)=>c[L]-c[S]);let q=(R.length-1)/2;for(let L=Math.floor(q),S=Math.ceil(q);L<=S;++L){let T=R[L];h[_]===_&&b<c[T]&&!e(m,_,T)&&(h[T]=_,h[_]=x[_]=x[T],b=c[T])}}})}),{root:x,align:h}}function n(p,O,m,N,x){let h={},c=a(p,O,m,x),g=x?"borderLeft":"borderRight";function b(q,L){let S=c.nodes(),T=S.pop(),V={};for(;T;)V[T]?q(T):(V[T]=!0,S.push(T),S=S.concat(L(T))),T=S.pop()}function _(q){h[q]=c.inEdges(q).reduce((L,S)=>Math.max(L,h[S.v]+c.edge(S)),0)}function R(q){let L=c.outEdges(q).reduce((T,V)=>Math.min(T,h[V.w]-c.edge(V)),Number.POSITIVE_INFINITY),S=p.node(q);L!==Number.POSITIVE_INFINITY&&S.borderType!==g&&(h[q]=Math.max(h[q],L))}return b(_,c.predecessors.bind(c)),b(R,c.successors.bind(c)),Object.keys(N).forEach(q=>h[q]=h[m[q]]),h}function a(p,O,m,N){let x=new y,h=p.graph(),c=E(h.nodesep,h.edgesep,N);return O.forEach(g=>{let b;g.forEach(_=>{let R=m[_];if(x.setNode(R),b){var q=m[b],L=x.edge(q,R);x.setEdge(q,R,Math.max(c(p,_,b),L||0))}b=_})}),x}function r(p,O){return Object.values(O).reduce((m,N)=>{let x=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;Object.entries(N).forEach(([g,b])=>{let _=C(p,g)/2;x=Math.max(b+_,x),h=Math.min(b-_,h)});const c=x-h;return c<m[0]&&(m=[c,N]),m},[Number.POSITIVE_INFINITY,null])[1]}function t(p,O){let m=Object.values(O),N=Math.min(...m),x=Math.max(...m);["u","d"].forEach(h=>{["l","r"].forEach(c=>{let g=h+c,b=p[g];if(b===O)return;let _=Object.values(b),R=N-Math.min(..._);c!=="l"&&(R=x-Math.max(..._)),R&&(p[g]=v.mapValues(b,q=>q+R))})})}function u(p,O){return v.mapValues(p.ul,(m,N)=>{if(O)return p[O.toLowerCase()][N];{let x=Object.values(p).map(h=>h[N]).sort((h,c)=>h-c);return(x[1]+x[2])/2}})}function f(p){let O=v.buildLayerMatrix(p),m=Object.assign(l(p,O),d(p,O)),N={},x;["u","d"].forEach(c=>{x=c==="u"?O:Object.values(O).reverse(),["l","r"].forEach(g=>{g==="r"&&(x=x.map(q=>Object.values(q).reverse()));let b=(c==="u"?p.predecessors:p.successors).bind(p),_=s(p,x,m,b),R=n(p,x,_.root,_.align,g==="r");g==="r"&&(R=v.mapValues(R,q=>-q)),N[c+g]=R})});let h=r(p,N);return t(N,h),u(N,p.graph().align)}function E(p,O,m){return(N,x,h)=>{let c=N.node(x),g=N.node(h),b=0,_;if(b+=c.width/2,c.hasOwnProperty("labelpos"))switch(c.labelpos.toLowerCase()){case"l":_=-c.width/2;break;case"r":_=c.width/2;break}if(_&&(b+=m?_:-_),_=0,b+=(c.dummy?O:p)/2,b+=(g.dummy?O:p)/2,b+=g.width/2,g.hasOwnProperty("labelpos"))switch(g.labelpos.toLowerCase()){case"l":_=g.width/2;break;case"r":_=-g.width/2;break}return _&&(b+=m?_:-_),_=0,b}}function C(p,O){return p.node(O).width}return Ge}var Fe,Mr;function jt(){if(Mr)return Fe;Mr=1;let y=F(),v=Lt().positionX;Fe=l;function l(o){o=y.asNonCompoundGraph(o),d(o),Object.entries(v(o)).forEach(([i,e])=>o.node(i).x=e)}function d(o){let i=y.buildLayerMatrix(o),e=o.graph().ranksep,s=0;i.forEach(n=>{const a=n.reduce((r,t)=>{const u=o.node(t).height;return r>u?r:u},0);n.forEach(r=>o.node(r).y=s+a/2),s+=a+e})}return Fe}var Ae,Dr;function St(){if(Dr)return Ae;Dr=1;let y=mt(),v=vt(),l=bt(),d=F().normalizeRanks,o=gt(),i=F().removeEmptyRanks,e=Et(),s=yt(),n=_t(),a=qt(),r=jt(),t=F(),u=z().Graph;Ae=f;function f(w,k){let I=k&&k.debugTiming?t.time:t.notime;I("layout",()=>{let P=I("  buildLayoutGraph",()=>b(w));I("  runLayout",()=>E(P,I,k)),I("  updateInputGraph",()=>C(w,P))})}function E(w,k,I){k("    makeSpaceForEdgeLabels",()=>_(w)),k("    removeSelfEdges",()=>Hr(w)),k("    acyclic",()=>y.run(w)),k("    nestingGraph.run",()=>e.run(w)),k("    rank",()=>l(t.asNonCompoundGraph(w))),k("    injectEdgeLabelProxies",()=>R(w)),k("    removeEmptyRanks",()=>i(w)),k("    nestingGraph.cleanup",()=>e.cleanup(w)),k("    normalizeRanks",()=>d(w)),k("    assignRankMinMax",()=>q(w)),k("    removeEdgeLabelProxies",()=>L(w)),k("    normalize.run",()=>v.run(w)),k("    parentDummyChains",()=>o(w)),k("    addBorderSegments",()=>s(w)),k("    order",()=>a(w,I)),k("    insertSelfEdges",()=>Qr(w)),k("    adjustCoordinateSystem",()=>n.adjust(w)),k("    position",()=>r(w)),k("    positionSelfEdges",()=>$r(w)),k("    removeBorderNodes",()=>X(w)),k("    normalize.undo",()=>v.undo(w)),k("    fixupEdgeLabelCoords",()=>V(w)),k("    undoCoordinateSystem",()=>n.undo(w)),k("    translateGraph",()=>S(w)),k("    assignNodeIntersects",()=>T(w)),k("    reversePoints",()=>U(w)),k("    acyclic.undo",()=>y.undo(w))}function C(w,k){w.nodes().forEach(I=>{let P=w.node(I),j=k.node(I);P&&(P.x=j.x,P.y=j.y,P.rank=j.rank,k.children(I).length&&(P.width=j.width,P.height=j.height))}),w.edges().forEach(I=>{let P=w.edge(I),j=k.edge(I);P.points=j.points,j.hasOwnProperty("x")&&(P.x=j.x,P.y=j.y)}),w.graph().width=k.graph().width,w.graph().height=k.graph().height}let p=["nodesep","edgesep","ranksep","marginx","marginy"],O={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},m=["acyclicer","ranker","rankdir","align"],N=["width","height"],x={width:0,height:0},h=["minlen","weight","width","height","labeloffset"],c={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},g=["labelpos"];function b(w){let k=new u({multigraph:!0,compound:!0}),I=$(w.graph());return k.setGraph(Object.assign({},O,Q(I,p),t.pick(I,m))),w.nodes().forEach(P=>{let j=$(w.node(P));const M=Q(j,N);Object.keys(x).forEach(D=>{M[D]===void 0&&(M[D]=x[D])}),k.setNode(P,M),k.setParent(P,w.parent(P))}),w.edges().forEach(P=>{let j=$(w.edge(P));k.setEdge(P,Object.assign({},c,Q(j,h),t.pick(j,g)))}),k}function _(w){let k=w.graph();k.ranksep/=2,w.edges().forEach(I=>{let P=w.edge(I);P.minlen*=2,P.labelpos.toLowerCase()!=="c"&&(k.rankdir==="TB"||k.rankdir==="BT"?P.width+=P.labeloffset:P.height+=P.labeloffset)})}function R(w){w.edges().forEach(k=>{let I=w.edge(k);if(I.width&&I.height){let P=w.node(k.v),M={rank:(w.node(k.w).rank-P.rank)/2+P.rank,e:k};t.addDummyNode(w,"edge-proxy",M,"_ep")}})}function q(w){let k=0;w.nodes().forEach(I=>{let P=w.node(I);P.borderTop&&(P.minRank=w.node(P.borderTop).rank,P.maxRank=w.node(P.borderBottom).rank,k=Math.max(k,P.maxRank))}),w.graph().maxRank=k}function L(w){w.nodes().forEach(k=>{let I=w.node(k);I.dummy==="edge-proxy"&&(w.edge(I.e).labelRank=I.rank,w.removeNode(k))})}function S(w){let k=Number.POSITIVE_INFINITY,I=0,P=Number.POSITIVE_INFINITY,j=0,M=w.graph(),D=M.marginx||0,B=M.marginy||0;function We(Y){let A=Y.x,W=Y.y,Ue=Y.width,Xe=Y.height;k=Math.min(k,A-Ue/2),I=Math.max(I,A+Ue/2),P=Math.min(P,W-Xe/2),j=Math.max(j,W+Xe/2)}w.nodes().forEach(Y=>We(w.node(Y))),w.edges().forEach(Y=>{let A=w.edge(Y);A.hasOwnProperty("x")&&We(A)}),k-=D,P-=B,w.nodes().forEach(Y=>{let A=w.node(Y);A.x-=k,A.y-=P}),w.edges().forEach(Y=>{let A=w.edge(Y);A.points.forEach(W=>{W.x-=k,W.y-=P}),A.hasOwnProperty("x")&&(A.x-=k),A.hasOwnProperty("y")&&(A.y-=P)}),M.width=I-k+D,M.height=j-P+B}function T(w){w.edges().forEach(k=>{let I=w.edge(k),P=w.node(k.v),j=w.node(k.w),M,D;I.points?(M=I.points[0],D=I.points[I.points.length-1]):(I.points=[],M=j,D=P),I.points.unshift(t.intersectRect(P,M)),I.points.push(t.intersectRect(j,D))})}function V(w){w.edges().forEach(k=>{let I=w.edge(k);if(I.hasOwnProperty("x"))switch((I.labelpos==="l"||I.labelpos==="r")&&(I.width-=I.labeloffset),I.labelpos){case"l":I.x-=I.width/2+I.labeloffset;break;case"r":I.x+=I.width/2+I.labeloffset;break}})}function U(w){w.edges().forEach(k=>{let I=w.edge(k);I.reversed&&I.points.reverse()})}function X(w){w.nodes().forEach(k=>{if(w.children(k).length){let I=w.node(k),P=w.node(I.borderTop),j=w.node(I.borderBottom),M=w.node(I.borderLeft[I.borderLeft.length-1]),D=w.node(I.borderRight[I.borderRight.length-1]);I.width=Math.abs(D.x-M.x),I.height=Math.abs(j.y-P.y),I.x=M.x+I.width/2,I.y=P.y+I.height/2}}),w.nodes().forEach(k=>{w.node(k).dummy==="border"&&w.removeNode(k)})}function Hr(w){w.edges().forEach(k=>{if(k.v===k.w){var I=w.node(k.v);I.selfEdges||(I.selfEdges=[]),I.selfEdges.push({e:k,label:w.edge(k)}),w.removeEdge(k)}})}function Qr(w){var k=t.buildLayerMatrix(w);k.forEach(I=>{var P=0;I.forEach((j,M)=>{var D=w.node(j);D.order=M+P,(D.selfEdges||[]).forEach(B=>{t.addDummyNode(w,"selfedge",{width:B.label.width,height:B.label.height,rank:D.rank,order:M+ ++P,e:B.e,label:B.label},"_se")}),delete D.selfEdges})})}function $r(w){w.nodes().forEach(k=>{var I=w.node(k);if(I.dummy==="selfedge"){var P=w.node(I.e.v),j=P.x+P.width/2,M=P.y,D=I.x-j,B=P.height/2;w.setEdge(I.e,I.label),w.removeNode(k),I.label.points=[{x:j+2*D/3,y:M-B},{x:j+5*D/6,y:M-B},{x:j+D,y:M},{x:j+5*D/6,y:M+B},{x:j+2*D/3,y:M+B}],I.label.x=I.x,I.label.y=I.y}})}function Q(w,k){return t.mapValues(t.pick(w,k),Number)}function $(w){var k={};return w&&Object.entries(w).forEach(([I,P])=>{typeof I=="string"&&(I=I.toLowerCase()),k[I]=P}),k}return Ae}var Ve,Gr;function Tt(){if(Gr)return Ve;Gr=1;let y=F(),v=z().Graph;Ve={debugOrdering:l};function l(d){let o=y.buildLayerMatrix(d),i=new v({compound:!0,multigraph:!0}).setGraph({});return d.nodes().forEach(e=>{i.setNode(e,{label:e}),i.setParent(e,"layer"+d.node(e).rank)}),d.edges().forEach(e=>i.setEdge(e.v,e.w,{},e.name)),o.forEach((e,s)=>{let n="layer"+s;i.setNode(n,{rank:"same"}),e.reduce((a,r)=>(i.setEdge(a,r,{style:"invis"}),r))}),i}return Ve}var Be,Fr;function Mt(){return Fr||(Fr=1,Be="1.1.3"),Be}var Ye,Ar;function Dt(){return Ar||(Ar=1,Ye={graphlib:z(),layout:St(),debug:Tt(),util:{time:F().time,notime:F().notime},version:Mt()}),Ye}var Xr=Dt();const Gt=Zr(Xr),Vt=et({__proto__:null,default:Gt},[Xr]);export{Gt as D,Vt as i};
