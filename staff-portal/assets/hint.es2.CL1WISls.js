import{C as f}from"./codemirror.es.CYbQtADy.js";import{f as g}from"./forEachState.es.C8esYVuF.js";import{b as d,c as h,e as x,j as u,d as T,a as V}from"./SettingsGraphQLPlayground.BzLPF7qB.js";import"./codemirror.es2.CXusOVRv.js";import"./index.Dg3lKJeg.js";import"./playgroundApiKeyState.By2k6NBY.js";import"./decode.BDRbQOCM.js";import"./FullScreenContainer.TrEglc8a.js";import"./Breadcrumb.CQyf5Hn6.js";function p(i,n,e){const r=j(e,b(n.string));if(!r)return;const t=n.type!==null&&/"|\w/.test(n.string[0])?n.start:n.end;return{list:r,from:{line:i.line,ch:t},to:{line:i.line,ch:n.end}}}function j(i,n){if(!n)return m(i,s=>!s.isDeprecated);const e=i.map(s=>({proximity:v(b(s.text),n),entry:s}));return m(m(e,s=>s.proximity<=2),s=>!s.entry.isDeprecated).sort((s,o)=>(s.entry.isDeprecated?1:0)-(o.entry.isDeprecated?1:0)||s.proximity-o.proximity||s.entry.text.length-o.entry.text.length).map(s=>s.entry)}function m(i,n){const e=i.filter(n);return e.length===0?i:e}function b(i){return i.toLowerCase().replaceAll(/\W/g,"")}function v(i,n){let e=L(n,i);return i.length>n.length&&(e-=i.length-n.length-1,e+=i.indexOf(n)===0?0:.5),e}function L(i,n){let e,r;const t=[],s=i.length,o=n.length;for(e=0;e<=s;e++)t[e]=[e];for(r=1;r<=o;r++)t[0][r]=r;for(e=1;e<=s;e++)for(r=1;r<=o;r++){const c=i[e-1]===n[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+c),e>1&&r>1&&i[e-1]===n[r-2]&&i[e-2]===n[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+c))}return t[s][o]}f.registerHelper("hint","graphql-variables",(i,n)=>{const e=i.getCursor(),r=i.getTokenAt(e),t=O(e,r,n);return t!=null&&t.list&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(i,"hasCompletion",i,t,r)),t});function O(i,n,e){const r=n.state.kind==="Invalid"?n.state.prevState:n.state,{kind:t,step:s}=r;if(t==="Document"&&s===0)return p(i,n,[{text:"{"}]);const{variableToType:o}=e;if(!o)return;const c=N(o,n.state);if(t==="Document"||t==="Variable"&&s===0){const a=Object.keys(o);return p(i,n,a.map(l=>({text:`"${l}": `,type:o[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&s===0)&&c.fields){const a=Object.keys(c.fields).map(l=>c.fields[l]);return p(i,n,a.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&s===1||t==="ObjectField"&&s===2||t==="Variable"&&s===2){const a=c.type?d(c.type):void 0;if(a instanceof h)return p(i,n,[{text:"{"}]);if(a instanceof x){const l=a.getValues();return p(i,n,l.map(y=>({text:`"${y.name}"`,type:a,description:y.description})))}if(a===u)return p(i,n,[{text:"true",type:u,description:"Not false."},{text:"false",type:u,description:"Not true."}])}}function N(i,n){const e={type:null,fields:null};return g(n,r=>{switch(r.kind){case"Variable":{e.type=i[r.name];break}case"ListValue":{const t=e.type?T(e.type):void 0;e.type=t instanceof V?t.ofType:null;break}case"ObjectValue":{const t=e.type?d(e.type):void 0;e.fields=t instanceof h?t.getFields():null;break}case"ObjectField":{const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type;break}}}),e}
