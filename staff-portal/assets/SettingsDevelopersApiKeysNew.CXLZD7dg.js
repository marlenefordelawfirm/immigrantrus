import{o as h,aY as K,N as b,r as k,aZ as x,a_ as D,j as n,a as r,z as y,l as _,H as S,_ as I,a$ as T,b0 as E,B as o,D as C,i as N}from"./index.Dg3lKJeg.js";import{S as j}from"./SaveAndCancelButtons.DdB8J98L.js";import{S as w}from"./SettingsPageContainer.CJeLyK8s.js";import{N as P}from"./NeverExpireDeltaInYears.BAM5Jy2K.js";import{a as R}from"./apiKeyTokenFamilyState.Vlc66NL9.js";import{S as V}from"./SubMenuTopBarContainer.BNGFwgBo.js";import"./IconDeviceFloppy.CaehffdS.js";import"./Breadcrumb.CQyf5Hn6.js";const v=[{label:"15 days",value:15},{label:"30 days",value:30},{label:"90 days",value:90},{label:"1 year",value:365},{label:"2 years",value:2*365},{label:"Never",value:P*365}],H=()=>{const{i18n:a,_:B}=h(),[A]=K(),l=b(),[s,p]=k.useState({expirationDate:v[5].value,name:""}),[d]=x(),g=D(({set:e})=>(t,i)=>{e(R(t),i)},[]),c=async()=>{var m;const e=C.now().plus({days:s.expirationDate??30}).toString(),{data:t}=await d({variables:{input:{name:s.name,expiresAt:e}}}),i=t==null?void 0:t.createApiKey;if(!i)return;const u=await A({variables:{apiKeyId:i.id,expiresAt:e}});N((m=u.data)==null?void 0:m.generateApiKeyToken)&&(g(i.id,u.data.generateApiKeyToken.token),l(o.ApiKeyDetail,{apiKeyId:i.id}))},f=!!s.name&&d;return n(V,{title:a._({id:"o8MyXb"}),links:[{children:a._({id:"pmUArF"}),href:y(o.Workspace)},{children:a._({id:"JR6nY7"}),href:y(o.APIs)},{children:a._({id:"j313SZ"})}],actionButton:n(j,{isSaveDisabled:!f,onCancel:()=>{l(o.APIs)},onSave:c}),children:r(w,{children:[r(_,{children:[n(S,{title:a._({id:"6YtxFj"}),description:a._({id:"z+6jaZ"})}),n(I,{instanceId:"api-key-new-name",placeholder:a._({id:"QVVmxi"}),value:s.name,onKeyDown:e=>{e.key===T.Key.Enter&&c()},onChange:e=>{p(t=>({...t,name:e}))},fullWidth:!0})]}),r(_,{children:[n(S,{title:a._({id:"SkXfL0"}),description:a._({id:"C51ilI"})}),n(E,{dropdownId:"object-field-type-select",options:v,value:s.expirationDate,onChange:e=>{p(t=>({...t,expirationDate:e}))}})]})]})})};export{H as SettingsDevelopersApiKeysNew};
