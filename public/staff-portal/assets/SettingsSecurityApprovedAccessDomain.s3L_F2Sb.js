import{N as Z,o as C,a6 as E,ak as b,a8 as k,a9 as y,a2 as r,j as e,a as c,z as p,l as S,H as g,a4 as f,_ as h,B as n,Z as d,ai as A}from"./index.Dg3lKJeg.js";import{S as B}from"./SaveAndCancelButtons.DdB8J98L.js";import{S as x}from"./SettingsPageContainer.CJeLyK8s.js";import{S as D}from"./SubMenuTopBarContainer.BNGFwgBo.js";import"./IconDeviceFloppy.CaehffdS.js";import"./Breadcrumb.CQyf5Hn6.js";const F=()=>{const l=Z(),{i18n:i,_:V}=C(),{enqueueSuccessSnackBar:v,enqueueErrorSnackBar:m}=E(),[_]=b(),t=k({mode:"onSubmit",resolver:y(r.object({domain:r.string().regex(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])\.[a-zA-Z]{2,}$/,{message:i._({id:"7kVRe6"})}).max(256),email:r.string().min(1,{message:i._({id:"unEEog"})})}).strict()),defaultValues:{email:"",domain:""}}),u=t.watch("domain"),z=async()=>{try{_({variables:{input:{domain:t.getValues("domain"),email:t.getValues("email")+"@"+t.getValues("domain")}},onCompleted:()=>{v({message:i._({id:"90/XJz"})}),l(n.Security)},onError:a=>{m({apolloError:a instanceof A?a:void 0})}})}catch(a){m({apolloError:a instanceof A?a:void 0})}};return e("form",{onSubmit:t.handleSubmit(z),children:e(D,{title:"New Approved Access Domain",actionButton:e(B,{onCancel:()=>l(n.Security),isSaveDisabled:t.formState.isSubmitting}),links:[{children:e(d,{id:"pmUArF"}),href:p(n.Workspace)},{children:e(d,{id:"a3LDKx"}),href:p(n.Security)},{children:e(d,{id:"2qr/61"})}],children:c(x,{children:[c(S,{children:[e(g,{title:i._({id:"EoKe5U"}),description:i._({id:"8EkdZh"})}),e(f,{name:"domain",control:t.control,render:({field:{onChange:a,value:s},fieldState:{error:o}})=>e(h,{instanceId:"approved-access-domain",autoFocus:!0,autoComplete:"off",value:s,onChange:a,fullWidth:!0,placeholder:"yourdomain.com",error:o==null?void 0:o.message})})]}),c(S,{children:[e(g,{title:i._({id:"LimKOG"}),description:i._({id:"PI4LiB"})}),e(f,{name:"email",control:t.control,render:({field:{onChange:a,value:s},fieldState:{error:o}})=>e(h,{instanceId:"approved-access-domain-email",autoComplete:"off",value:s.split("@")[0],onChange:a,fullWidth:!0,error:o==null?void 0:o.message,rightAdornment:`@${u.length!==0?u:"your-domain.com"}`})})]})]})})})};export{F as SettingsSecurityApprovedAccessDomain};
