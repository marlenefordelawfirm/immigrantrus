import{i as g,e as v,p as B}from"./index.DEehm0bc.js";import{w as h}from"./index.D4Wp6AEg.js";import{v as F,S as I}from"./index.BVeNH5zi.js";import{w as W}from"./index.E0wwlW8h.js";const k=function(e){if(e==null)return O;if(typeof e=="function")return m(e);if(typeof e=="object")return Array.isArray(e)?$(e):j(e);if(typeof e=="string")return E(e);throw new Error("Expected function, string, or object as test")};function $(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=k(e[n]);return m(r);function r(...a){let l=-1;for(;++l<t.length;)if(t[l].apply(this,a))return!0;return!1}}function j(e){const t=e;return m(n);function n(r){const a=r;let l;for(l in e)if(a[l]!==t[l])return!1;return!0}}function E(e){return m(t);function t(n){return n&&n.type===e}}function m(e){return t;function t(n,r,a){return!!(P(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function O(){return!0}function P(e){return e!==null&&typeof e=="object"&&"type"in e}const R=["address","article","aside","blockquote","body","br","caption","center","col","colgroup","dd","dialog","dir","div","dl","dt","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","legend","li","li","listing","main","menu","nav","ol","optgroup","option","p","plaintext","pre","section","summary","table","tbody","td","td","tfoot","th","th","thead","tr","ul","wbr","xmp"],T=["button","input","select","textarea"],q=["area","base","basefont","dialog","datalist","head","link","meta","noembed","noframes","param","rp","script","source","style","template","track","title"],K={},d=k(["comment","doctype"]);function L(e,t){x(e,{collapse:J((t||K).newlines?G:H),whitespace:"normal"})}function x(e,t){if("children"in e){const n={...t};return(e.type==="root"||S(e))&&(n.before=!0,n.after=!0),n.whitespace=Q(e,t),z(e,n)}if(e.type==="text"){if(t.whitespace==="normal")return M(e,t);t.whitespace==="nowrap"&&(e.value=t.collapse(e.value))}return{ignore:d(e),stripAtStart:!1,remove:!1}}function M(e,t){const n=t.collapse(e.value),r={ignore:!1,stripAtStart:!1,remove:!1};let a=0,l=n.length;return t.before&&b(n.charAt(0))&&a++,a!==l&&b(n.charAt(l-1))&&(t.after?l--:r.stripAtStart=!0),a===l?r.remove=!0:e.value=n.slice(a,l),r}function z(e,t){let n=t.before;const r=t.after,a=e.children;let l=a.length,i=-1;for(;++i<l;){const u=x(a[i],{...t,after:A(a,i,r),before:n});u.remove?(a.splice(i,1),i--,l--):u.ignore||(n=u.stripAtStart),N(a[i])&&(n=!1)}return{ignore:!1,stripAtStart:!!(n||r),remove:!1}}function A(e,t,n){for(;++t<e.length;){const r=e[t];let a=C(r);if(a===void 0&&"children"in r&&!D(r)&&(a=A(r.children,-1)),typeof a=="boolean")return a}return n}function C(e){if(e.type==="element"){if(N(e))return!1;if(S(e))return!0}else if(e.type==="text"){if(!h(e))return!1}else if(!d(e))return!1}function N(e){return v(e)||g(e,T)}function S(e){return g(e,R)}function D(e){return!!(e.type==="element"&&e.properties.hidden)||d(e)||g(e,q)}function b(e){return e===" "||e===`
`}function G(e){const t=/\r?\n|\r/.exec(e);return t?t[0]:" "}function H(){return" "}function J(e){return t;function t(n){return String(n).replace(/[\t\n\v\f\r ]+/g,e)}}function Q(e,t){if("tagName"in e&&e.properties)switch(e.tagName){case"listing":case"plaintext":case"script":case"style":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return e.properties.wrap?"pre-wrap":"pre";case"td":case"th":return e.properties.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}return t.whitespace}const U={};function V(e,t){const n=t||U,r={blanks:n.blanks||[],head:!1,indentInitial:n.indentInitial!==!1,indent:typeof n.indent=="number"?" ".repeat(n.indent):typeof n.indent=="string"?n.indent:"  "};L(e,{newlines:!0}),F(e,a);function a(i,u){if(!("children"in i))return;if(i.type==="element"&&i.tagName==="head"&&(r.head=!0),r.head&&i.type==="element"&&i.tagName==="body"&&(r.head=!1),i.type==="element"&&W.includes(i.tagName))return I;if(i.children.length===0||!y(r,i))return;let p=u.length;r.indentInitial||p--;let o=!1;for(const s of i.children)(s.type==="comment"||s.type==="text")&&(s.value.includes(`
`)&&(o=!0),s.value=s.value.replace(/ *\n/g,"$&"+r.indent.repeat(p)));const f=[];let c;for(const s of i.children)(y(r,s)||o&&!c)&&(l(f,p,s),o=!0),c=s,f.push(s);c&&(o||y(r,c))&&(h(c)&&(f.pop(),c=f[f.length-1]),l(f,p-1)),i.children=f}function l(i,u,p){const o=i[i.length-1],f=o&&h(o)?i[i.length-2]:o,c=(w(r,f)&&w(r,p)?`

`:`
`)+r.indent.repeat(Math.max(u,0));o&&o.type==="text"?o.value=h(o)?c:o.value+c:i.push({type:"text",value:c})}}function w(e,t){return!!(t&&t.type==="element"&&e.blanks.length>0&&e.blanks.includes(t.tagName))}function y(e,t){return t.type==="root"||(t.type==="element"?e.head||t.tagName==="script"||v(t)||!B(t):!1)}function ee(e){return function(t){V(t,e)}}export{ee as default};
