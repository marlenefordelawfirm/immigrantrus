import{bo as h,bp as f,o as p,N as j,a6 as E,r as g,a8 as C,a9 as M,j as a,z as m,a as A,H as v,l as I,B as s,Q as B,ai as L}from"./index.Dg3lKJeg.js";import{C as T}from"./mutations.DtsxS3kK.js";import{u as D}from"./DatabaseIdentifierMaximumLength.CM85nVoY.js";import{S as N}from"./SaveAndCancelButtons.DdB8J98L.js";import{S as y}from"./SettingsPageContainer.CJeLyK8s.js";import{s as F,S as w}from"./settingsDataModelObjectAboutFormSchema.F6IjJ7j0.js";import{S as P}from"./SubMenuTopBarContainer.BNGFwgBo.js";import"./IconDeviceFloppy.CaehffdS.js";import"./SettingsOptionCardContentToggle.DYPf28jM.js";import"./SettingsOptionIconCustomizer.BYkiWDDL.js";import"./Breadcrumb.CQyf5Hn6.js";const V=()=>{const{refreshCachedViews:e}=D(),{refreshObjectMetadataItems:c}=h("network-only"),[r]=f(T);return{createOneObjectMetadataItem:async i=>{const o=await r({variables:{input:{object:i}}});return await c(),e(),o}}},k=!0,G=()=>{const{i18n:e,_:c}=p(),r=j(),{enqueueErrorSnackBar:d}=E(),[i,o]=g.useState(!1),{createOneObjectMetadataItem:u}=V(),n=C({mode:"onSubmit",resolver:M(F),defaultValues:{isLabelSyncedWithName:k}}),{isValid:b,isSubmitting:l}=n.formState,S=b&&!l,_=async O=>{try{o(!0);const{data:t}=await u(O);r(t?s.ObjectDetail:s.Objects,t?{objectNamePlural:t.createOneObject.namePlural}:void 0)}catch(t){console.error(t),d({apolloError:t instanceof L?t:void 0})}finally{o(!1)}};return a(B,{...n,children:a(P,{title:e._({id:"hFxdey"}),links:[{children:e._({id:"pmUArF"}),href:m(s.Workspace)},{children:e._({id:"B3toQF"}),href:m(s.Objects)},{children:e._({id:"isRobC"})}],actionButton:a(N,{isSaveDisabled:!S,isLoading:i,isCancelDisabled:l,onCancel:()=>r(s.Objects),onSave:n.handleSubmit(_)}),children:a(y,{children:A(I,{children:[a(v,{title:e._({id:"uyJsf6"}),description:e._({id:"Y2ImVJ"})}),a(w,{onNewDirtyField:()=>n.trigger()})]})})})})};export{G as SettingsNewObject};
