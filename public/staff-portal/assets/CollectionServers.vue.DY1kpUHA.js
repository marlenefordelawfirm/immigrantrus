import{d as _,F as A,J as D,c as k,R as $,K as j,b as p,o,k as w,x as E,f as i,e as C,N as z,L as I,M as P,q as c,O as R,z as q,u as a,P as B,t as L,w as v,$ as U,D as g,Q as M,S as O,T}from"./index._i9Oi-Kg.js";import{w as V}from"./DeleteSidebarListElement.vue.BYxIfb0-.js";import{q as F}from"./Form.vue.Cyv_cjzL.js";import"./index.Dg3lKJeg.js";import"./clsx.B-dksMZM.js";import"./index.Wb4bzIyB.js";import"./index.BVeNH5zi.js";import"./index.BUCFnM-n.js";import"./index.DEehm0bc.js";import"./index.D4Wp6AEg.js";import"./index.CjrT3HcA.js";import"./index.CWtGfzcb.js";import"./index.D55_0Pbk.js";import"./index.dom.C3-224fz.js";import"./index.DdCAsX36.js";import"./index.ByI_odx6.js";import"./syntax.Dh_7PnPp.js";import"./index.c2V3InAJ.js";import"./default.Cl3hj7Sz.js";import"./index.DOWyBKr8.js";import"./index.COYepv-L.js";import"./index.Dq2i-IQA.js";import"./index.BY3x9OSE.js";import"./index.D13MPiJ5.js";import"./index.C2o2j-tx.js";import"./index.D22iV9cu.js";import"./index.C06_t6vS.js";import"./decode.BDRbQOCM.js";import"./index.bsVAaBS1.js";import"./index.E0wwlW8h.js";import"./index.DWHkiPoB.js";import"./fuse.Ch1WBRTM.js";import"./ViewLayoutSection.vue.DQEriikE.js";const W={class:"bg-b-1 divide-0.5 flex w-full flex-col divide-y text-sm"},G=_({__name:"CollectionServerForm",props:{collectionId:{default:""},serverUid:{default:""}},setup(S){const s=S,{activeWorkspaceCollections:d}=A(),{servers:b,serverMutators:m}=D(),n=[{label:"URL",key:"url",placeholder:"https://void.scalar.com",type:"text"},{label:"Description",key:"description",placeholder:"Production",type:"text"}],l=k(()=>{const r=d.value.find(e=>e.uid===s.collectionId);return b[r&&typeof s.serverUid=="string"&&s.serverUid==="default"?r.servers[0]??"":(r==null?void 0:r.servers.find(e=>e===s.serverUid))??""]}),x=k(()=>{var r,e;return(r=l.value)!=null&&r.url?((e=l.value.url.match($.PATH))==null?void 0:e.map(t=>t.slice(1,-1)))??[]:[]});j(x,r=>{if(!l.value)return;const e=l.value.variables?{...l.value.variables}:{};Object.keys(e).forEach(t=>{r.includes(t)||delete e[t]}),r.forEach(t=>{e[t]||(e[t]={default:""})}),m.edit(l.value.uid,"variables",e)},{immediate:!0});const h=(r,e)=>{!d.value||!l.value||m.edit(l.value.uid,r,e)},y=(r,e)=>{if(!l.value)return;const t=l.value.variables||{};t[r]={...t[r],default:e},m.edit(l.value.uid,"variables",t)};return(r,e)=>(o(),p("div",W,[l.value?(o(),p(E,{key:0},[i(F,{data:l.value,onUpdate:h,options:n},null,8,["data"]),l.value.variables?(o(),C(z,{key:0,variables:l.value.variables,"onUpdate:variable":y},null,8,["variables"])):w("",!0)],64)):w("",!0)]))}}),H={class:"flex h-full w-full flex-col gap-12 px-1.5 pt-8"},Y={class:"flex flex-col gap-4"},J={class:"bg-b-2 overflow-hidden rounded-lg border"},K={class:"flex items-center justify-between py-1 pl-3 pr-1 text-sm"},Q={key:1},X={class:"text-c-3 flex h-full items-center justify-center rounded-lg border p-4"},ze=_({__name:"CollectionServers",setup(S){const{activeCollection:s}=A(),{servers:d,events:b,serverMutators:m}=D(),n=I(),l=P(null),x=k(()=>{var e;return!d||!((e=s.value)!=null&&e.servers)?[]:Object.values(d).filter(t=>{var f;return(f=s.value)==null?void 0:f.servers.includes(t.uid)})}),h=()=>b.commandPalette.emit({commandName:"Add Server"}),y=()=>{var e;!((e=s.value)!=null&&e.uid)||!l.value||(m.delete(l.value,s.value.uid),n.hide())},r=e=>{l.value=e,n.show()};return(e,t)=>{var f;return o(),p("div",H,[c("div",Y,[t[3]||(t[3]=R('<div class="flex items-start justify-between gap-2"><div class="flex flex-col"><div class="flex h-8 items-center"><h3 class="font-bold">Servers</h3></div><p class="text-sm"> Add different base URLs for your API. You can use <code class="font-code text-c-2">{variables}</code> for dynamic parts. </p></div></div>',1)),(o(!0),p(E,null,q(x.value,(u,N)=>(o(),p("div",{key:u.uid},[c("div",J,[c("div",K,[u.description?(o(),C(a(B),{key:0,value:u.description},null,8,["value"])):(o(),p("span",Q,"Server "+L(N+1),1)),i(a(O),{placement:"bottom-end"},{items:v(()=>[i(a(M),{class:"flex gap-2 font-normal",onClick:Z=>r(u.uid)},{default:v(()=>[i(a(g),{class:"inline-flex",icon:"Delete",size:"sm",thickness:"1.5"}),t[1]||(t[1]=c("span",null,"Delete",-1))]),_:2},1032,["onClick"])]),default:v(()=>[i(a(U),{class:"hover:bg-b-3 h-full max-h-8 gap-1 p-1 text-xs",variant:"ghost"},{default:v(()=>[i(a(g),{class:"text-c-3",icon:"Ellipses",size:"md"})]),_:1})]),_:2},1024)]),a(s)?(o(),C(G,{key:0,collectionId:a(s).uid,serverUid:u.uid},null,8,["collectionId","serverUid"])):w("",!0)])]))),128)),c("div",X,[i(a(U),{class:"hover:bg-b-2 hover:text-c-1 flex items-center gap-2",size:"sm",variant:"ghost",onClick:h},{default:v(()=>[i(a(g),{class:"inline-flex",icon:"Add",size:"sm",thickness:"1.5"}),t[2]||(t[2]=c("span",null,"Add Server",-1))]),_:1})])]),i(a(T),{size:"xxs",state:a(n),title:`Delete ${l.value?(f=a(d)[l.value])==null?void 0:f.url:"Server"}`},{default:v(()=>[i(V,{variableName:"Server",warningMessage:"Are you sure you want to delete this server? This action cannot be undone.",onClose:t[0]||(t[0]=u=>a(n).hide()),onDelete:y})]),_:1},8,["state","title"])])}}});export{ze as default};
